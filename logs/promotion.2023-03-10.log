2023-03-10 00:01:11.830 [restartedMain] INFO  com.chat.message.MessageApplication - Starting MessageApplication using Java 1.8.0_102 on LAPTOP-2IRQMR2A with PID 20528 (C:\Users\张强\Documents\WeChat Files\wxid_68p7c2r277zq22\FileStorage\File\2023-02\applet-chat\target\classes started by 张强 in C:\Users\张强\Documents\WeChat Files\wxid_68p7c2r277zq22\FileStorage\File\2023-02\applet-chat)
2023-03-10 00:01:11.839 [restartedMain] DEBUG com.chat.message.MessageApplication - Running with Spring Boot v2.5.3, Spring v5.3.9
2023-03-10 00:01:11.839 [restartedMain] INFO  com.chat.message.MessageApplication - The following profiles are active: dev
2023-03-10 00:01:11.879 [restartedMain] INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2023-03-10 00:01:11.879 [restartedMain] INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2023-03-10 00:01:12.881 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 9999 (http)
2023-03-10 00:01:12.889 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-9999"]
2023-03-10 00:01:12.889 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2023-03-10 00:01:12.889 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.50]
2023-03-10 00:01:12.993 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/message-server] - Initializing Spring embedded WebApplicationContext
2023-03-10 00:01:12.993 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1114 ms
2023-03-10 00:01:13.139 [restartedMain] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2023-03-10 00:01:13.379 [restartedMain] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2023-03-10 00:01:14.609 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2023-03-10 00:01:14.629 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-9999"]
2023-03-10 00:01:14.639 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 9999 (http) with context path '/message-server'
2023-03-10 00:01:14.649 [restartedMain] INFO  com.chat.message.MessageApplication - Started MessageApplication in 3.295 seconds (JVM running for 5.51)
2023-03-10 00:01:15.139 [http-nio-9999-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/message-server] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-03-10 00:01:15.139 [http-nio-9999-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2023-03-10 00:01:15.139 [http-nio-9999-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2023-03-10 00:01:15.189 [http-nio-9999-exec-1] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:6
2023-03-10 00:01:23.167 [http-nio-9999-exec-4] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:6
2023-03-10 00:01:23.522 [http-nio-9999-exec-3] WARN  com.aliyun.oss - [Server]Unable to execute HTTP request: The request signature we calculated does not match the signature you provided. Check your key and signing method.
[ErrorCode]: SignatureDoesNotMatch
[RequestId]: 640A02D01344D1383662263D
[HostId]: ldzy-zhang.oss-cn-shenzhen.aliyuncs.com
[ResponseError]:
<?xml version="1.0" encoding="UTF-8"?>
<Error>
  <Code>SignatureDoesNotMatch</Code>
  <Message>The request signature we calculated does not match the signature you provided. Check your key and signing method.</Message>
  <RequestId>640A02D01344D1383662263D</RequestId>
  <HostId>ldzy-zhang.oss-cn-shenzhen.aliyuncs.com</HostId>
  <OSSAccessKeyId>LTAI5tRZssYLATQ7tWGtrMEZ</OSSAccessKeyId>
  <SignatureProvided>vYm9Uns6pcQvtT8H8b9aK6z0QlY=</SignatureProvided>
  <StringToSign>PUT

image/jpeg
Thu, 09 Mar 2023 16:01:22 GMT
/ldzy-zhang/avatar/20230310/14fa810e92a24f3b831bae6a544d7534.jpg</StringToSign>
  <StringToSignBytes>50 55 54 0A 0A 69 6D 61 67 65 2F 6A 70 65 67 0A 54 68 75 2C 20 30 39 20 4D 61 72 20 32 30 32 33 20 31 36 3A 30 31 3A 32 32 20 47 4D 54 0A 2F 6C 64 7A 79 2D 7A 68 61 6E 67 2F 61 76 61 74 61 72 2F 32 30 32 33 30 33 31 30 2F 31 34 66 61 38 31 30 65 39 32 61 32 34 66 33 62 38 33 31 62 61 65 36 61 35 34 34 64 37 35 33 34 2E 6A 70 67 </StringToSignBytes>
  <EC>0002-00000040</EC>
</Error>

2023-03-10 00:01:23.539 [http-nio-9999-exec-3] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [/message-server] threw exception [Request processing failed; nested exception is java.lang.RuntimeException: 上传文件失败，请检查配置信息] with root cause
com.aliyun.oss.OSSException: The request signature we calculated does not match the signature you provided. Check your key and signing method.
[ErrorCode]: SignatureDoesNotMatch
[RequestId]: 640A02D01344D1383662263D
[HostId]: ldzy-zhang.oss-cn-shenzhen.aliyuncs.com
[ResponseError]:
<?xml version="1.0" encoding="UTF-8"?>
<Error>
  <Code>SignatureDoesNotMatch</Code>
  <Message>The request signature we calculated does not match the signature you provided. Check your key and signing method.</Message>
  <RequestId>640A02D01344D1383662263D</RequestId>
  <HostId>ldzy-zhang.oss-cn-shenzhen.aliyuncs.com</HostId>
  <OSSAccessKeyId>LTAI5tRZssYLATQ7tWGtrMEZ</OSSAccessKeyId>
  <SignatureProvided>vYm9Uns6pcQvtT8H8b9aK6z0QlY=</SignatureProvided>
  <StringToSign>PUT

image/jpeg
Thu, 09 Mar 2023 16:01:22 GMT
/ldzy-zhang/avatar/20230310/14fa810e92a24f3b831bae6a544d7534.jpg</StringToSign>
  <StringToSignBytes>50 55 54 0A 0A 69 6D 61 67 65 2F 6A 70 65 67 0A 54 68 75 2C 20 30 39 20 4D 61 72 20 32 30 32 33 20 31 36 3A 30 31 3A 32 32 20 47 4D 54 0A 2F 6C 64 7A 79 2D 7A 68 61 6E 67 2F 61 76 61 74 61 72 2F 32 30 32 33 30 33 31 30 2F 31 34 66 61 38 31 30 65 39 32 61 32 34 66 33 62 38 33 31 62 61 65 36 61 35 34 34 64 37 35 33 34 2E 6A 70 67 </StringToSignBytes>
  <EC>0002-00000040</EC>
</Error>

	at com.aliyun.oss.common.utils.ExceptionFactory.createOSSException(ExceptionFactory.java:99)
	at com.aliyun.oss.internal.OSSErrorResponseHandler.handle(OSSErrorResponseHandler.java:69)
	at com.aliyun.oss.common.comm.ServiceClient.handleResponse(ServiceClient.java:248)
	at com.aliyun.oss.common.comm.ServiceClient.sendRequestImpl(ServiceClient.java:130)
	at com.aliyun.oss.common.comm.ServiceClient.sendRequest(ServiceClient.java:68)
	at com.aliyun.oss.internal.OSSOperation.send(OSSOperation.java:94)
	at com.aliyun.oss.internal.OSSOperation.doOperation(OSSOperation.java:149)
	at com.aliyun.oss.internal.OSSOperation.doOperation(OSSOperation.java:113)
	at com.aliyun.oss.internal.OSSObjectOperation.writeObjectInternal(OSSObjectOperation.java:907)
	at com.aliyun.oss.internal.OSSObjectOperation.putObject(OSSObjectOperation.java:148)
	at com.aliyun.oss.OSSClient.putObject(OSSClient.java:475)
	at com.aliyun.oss.OSSClient.putObject(OSSClient.java:457)
	at com.aliyun.oss.OSSClient.putObject(OSSClient.java:451)
	at com.chat.message.config.AliyunCloudStorageService.upload(AliyunCloudStorageService.java:36)
	at com.chat.message.config.AliyunCloudStorageService.upload(AliyunCloudStorageService.java:30)
	at com.chat.message.config.AliyunCloudStorageService.uploadSuffix(AliyunCloudStorageService.java:47)
	at com.chat.message.web.MobileMediaUploadController.upload(MobileMediaUploadController.java:33)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1064)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:228)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1723)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
2023-03-10 00:01:32.569 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.update - ==>  Preparing: UPDATE message SET is_last=? WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) 
2023-03-10 00:01:32.579 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.update - ==> Parameters: 0(Integer), 0(Integer), 0(Long), 6(Long), 0(Long), 6(Long)
2023-03-10 00:01:32.589 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.update - <==    Updates: 3
2023-03-10 00:01:32.589 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.insert - ==>  Preparing: INSERT INTO message ( type, content, content_type, is_read, sender, receiver, request_id, is_last, created_by, created_time, updated_by, updated_time, del_flag ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2023-03-10 00:01:32.597 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.insert - ==> Parameters: 0(Integer), [{"type":2,"content":"[害羞]","imageClass":"smiley_6"}](String), 0(Integer), 0(String), 0(Long), 6(Long), ed5d523f-d0a5-4a9b-8b87-4643826836a4(String), true(Boolean), null, 2023-03-10 00:01:32.499(Timestamp), null, null, 0(String)
2023-03-10 00:01:32.597 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.insert - <==    Updates: 1
2023-03-10 00:01:42.179 [http-nio-9999-exec-7] WARN  com.aliyun.oss - [Server]Unable to execute HTTP request: The request signature we calculated does not match the signature you provided. Check your key and signing method.
[ErrorCode]: SignatureDoesNotMatch
[RequestId]: 640A02E3A55499343110C3EF
[HostId]: ldzy-zhang.oss-cn-shenzhen.aliyuncs.com
[ResponseError]:
<?xml version="1.0" encoding="UTF-8"?>
<Error>
  <Code>SignatureDoesNotMatch</Code>
  <Message>The request signature we calculated does not match the signature you provided. Check your key and signing method.</Message>
  <RequestId>640A02E3A55499343110C3EF</RequestId>
  <HostId>ldzy-zhang.oss-cn-shenzhen.aliyuncs.com</HostId>
  <OSSAccessKeyId>LTAI5tRZssYLATQ7tWGtrMEZ</OSSAccessKeyId>
  <SignatureProvided>5jZu1zCAVU0rN6REMi14n9zkilo=</SignatureProvided>
  <StringToSign>PUT

image/jpeg
Thu, 09 Mar 2023 16:01:41 GMT
/ldzy-zhang/avatar/20230310/ae8b0f0a4dc4482686c6dc8953d04133.jpg</StringToSign>
  <StringToSignBytes>50 55 54 0A 0A 69 6D 61 67 65 2F 6A 70 65 67 0A 54 68 75 2C 20 30 39 20 4D 61 72 20 32 30 32 33 20 31 36 3A 30 31 3A 34 31 20 47 4D 54 0A 2F 6C 64 7A 79 2D 7A 68 61 6E 67 2F 61 76 61 74 61 72 2F 32 30 32 33 30 33 31 30 2F 61 65 38 62 30 66 30 61 34 64 63 34 34 38 32 36 38 36 63 36 64 63 38 39 35 33 64 30 34 31 33 33 2E 6A 70 67 </StringToSignBytes>
  <EC>0002-00000040</EC>
</Error>

2023-03-10 00:01:42.179 [http-nio-9999-exec-7] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [/message-server] threw exception [Request processing failed; nested exception is java.lang.RuntimeException: 上传文件失败，请检查配置信息] with root cause
com.aliyun.oss.OSSException: The request signature we calculated does not match the signature you provided. Check your key and signing method.
[ErrorCode]: SignatureDoesNotMatch
[RequestId]: 640A02E3A55499343110C3EF
[HostId]: ldzy-zhang.oss-cn-shenzhen.aliyuncs.com
[ResponseError]:
<?xml version="1.0" encoding="UTF-8"?>
<Error>
  <Code>SignatureDoesNotMatch</Code>
  <Message>The request signature we calculated does not match the signature you provided. Check your key and signing method.</Message>
  <RequestId>640A02E3A55499343110C3EF</RequestId>
  <HostId>ldzy-zhang.oss-cn-shenzhen.aliyuncs.com</HostId>
  <OSSAccessKeyId>LTAI5tRZssYLATQ7tWGtrMEZ</OSSAccessKeyId>
  <SignatureProvided>5jZu1zCAVU0rN6REMi14n9zkilo=</SignatureProvided>
  <StringToSign>PUT

image/jpeg
Thu, 09 Mar 2023 16:01:41 GMT
/ldzy-zhang/avatar/20230310/ae8b0f0a4dc4482686c6dc8953d04133.jpg</StringToSign>
  <StringToSignBytes>50 55 54 0A 0A 69 6D 61 67 65 2F 6A 70 65 67 0A 54 68 75 2C 20 30 39 20 4D 61 72 20 32 30 32 33 20 31 36 3A 30 31 3A 34 31 20 47 4D 54 0A 2F 6C 64 7A 79 2D 7A 68 61 6E 67 2F 61 76 61 74 61 72 2F 32 30 32 33 30 33 31 30 2F 61 65 38 62 30 66 30 61 34 64 63 34 34 38 32 36 38 36 63 36 64 63 38 39 35 33 64 30 34 31 33 33 2E 6A 70 67 </StringToSignBytes>
  <EC>0002-00000040</EC>
</Error>

	at com.aliyun.oss.common.utils.ExceptionFactory.createOSSException(ExceptionFactory.java:99)
	at com.aliyun.oss.internal.OSSErrorResponseHandler.handle(OSSErrorResponseHandler.java:69)
	at com.aliyun.oss.common.comm.ServiceClient.handleResponse(ServiceClient.java:248)
	at com.aliyun.oss.common.comm.ServiceClient.sendRequestImpl(ServiceClient.java:130)
	at com.aliyun.oss.common.comm.ServiceClient.sendRequest(ServiceClient.java:68)
	at com.aliyun.oss.internal.OSSOperation.send(OSSOperation.java:94)
	at com.aliyun.oss.internal.OSSOperation.doOperation(OSSOperation.java:149)
	at com.aliyun.oss.internal.OSSOperation.doOperation(OSSOperation.java:113)
	at com.aliyun.oss.internal.OSSObjectOperation.writeObjectInternal(OSSObjectOperation.java:907)
	at com.aliyun.oss.internal.OSSObjectOperation.putObject(OSSObjectOperation.java:148)
	at com.aliyun.oss.OSSClient.putObject(OSSClient.java:475)
	at com.aliyun.oss.OSSClient.putObject(OSSClient.java:457)
	at com.aliyun.oss.OSSClient.putObject(OSSClient.java:451)
	at com.chat.message.config.AliyunCloudStorageService.upload(AliyunCloudStorageService.java:36)
	at com.chat.message.config.AliyunCloudStorageService.upload(AliyunCloudStorageService.java:30)
	at com.chat.message.config.AliyunCloudStorageService.uploadSuffix(AliyunCloudStorageService.java:47)
	at com.chat.message.web.MobileMediaUploadController.upload(MobileMediaUploadController.java:33)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1064)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:228)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1723)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
2023-03-10 00:01:43.955 [http-nio-9999-exec-8] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:6
2023-03-10 00:11:07.089 [http-nio-9999-exec-10] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:6
2023-03-10 00:11:08.449 [http-nio-9999-exec-2] WARN  com.aliyun.oss - [Server]Unable to execute HTTP request: The request signature we calculated does not match the signature you provided. Check your key and signing method.
[ErrorCode]: SignatureDoesNotMatch
[RequestId]: 640A051A8A5A14343698393C
[HostId]: ldzy-zhang.oss-cn-shenzhen.aliyuncs.com
[ResponseError]:
<?xml version="1.0" encoding="UTF-8"?>
<Error>
  <Code>SignatureDoesNotMatch</Code>
  <Message>The request signature we calculated does not match the signature you provided. Check your key and signing method.</Message>
  <RequestId>640A051A8A5A14343698393C</RequestId>
  <HostId>ldzy-zhang.oss-cn-shenzhen.aliyuncs.com</HostId>
  <OSSAccessKeyId>LTAI5tRZssYLATQ7tWGtrMEZ</OSSAccessKeyId>
  <SignatureProvided>s2AvC0sAziATRv+LCy/whND0gnk=</SignatureProvided>
  <StringToSign>PUT

image/jpeg
Thu, 09 Mar 2023 16:11:08 GMT
/ldzy-zhang/avatar/20230310/415119a11aed468e98f692b709d636eb.jpg</StringToSign>
  <StringToSignBytes>50 55 54 0A 0A 69 6D 61 67 65 2F 6A 70 65 67 0A 54 68 75 2C 20 30 39 20 4D 61 72 20 32 30 32 33 20 31 36 3A 31 31 3A 30 38 20 47 4D 54 0A 2F 6C 64 7A 79 2D 7A 68 61 6E 67 2F 61 76 61 74 61 72 2F 32 30 32 33 30 33 31 30 2F 34 31 35 31 31 39 61 31 31 61 65 64 34 36 38 65 39 38 66 36 39 32 62 37 30 39 64 36 33 36 65 62 2E 6A 70 67 </StringToSignBytes>
  <EC>0002-00000040</EC>
</Error>

2023-03-10 00:11:08.449 [http-nio-9999-exec-2] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [/message-server] threw exception [Request processing failed; nested exception is java.lang.RuntimeException: 上传文件失败，请检查配置信息] with root cause
com.aliyun.oss.OSSException: The request signature we calculated does not match the signature you provided. Check your key and signing method.
[ErrorCode]: SignatureDoesNotMatch
[RequestId]: 640A051A8A5A14343698393C
[HostId]: ldzy-zhang.oss-cn-shenzhen.aliyuncs.com
[ResponseError]:
<?xml version="1.0" encoding="UTF-8"?>
<Error>
  <Code>SignatureDoesNotMatch</Code>
  <Message>The request signature we calculated does not match the signature you provided. Check your key and signing method.</Message>
  <RequestId>640A051A8A5A14343698393C</RequestId>
  <HostId>ldzy-zhang.oss-cn-shenzhen.aliyuncs.com</HostId>
  <OSSAccessKeyId>LTAI5tRZssYLATQ7tWGtrMEZ</OSSAccessKeyId>
  <SignatureProvided>s2AvC0sAziATRv+LCy/whND0gnk=</SignatureProvided>
  <StringToSign>PUT

image/jpeg
Thu, 09 Mar 2023 16:11:08 GMT
/ldzy-zhang/avatar/20230310/415119a11aed468e98f692b709d636eb.jpg</StringToSign>
  <StringToSignBytes>50 55 54 0A 0A 69 6D 61 67 65 2F 6A 70 65 67 0A 54 68 75 2C 20 30 39 20 4D 61 72 20 32 30 32 33 20 31 36 3A 31 31 3A 30 38 20 47 4D 54 0A 2F 6C 64 7A 79 2D 7A 68 61 6E 67 2F 61 76 61 74 61 72 2F 32 30 32 33 30 33 31 30 2F 34 31 35 31 31 39 61 31 31 61 65 64 34 36 38 65 39 38 66 36 39 32 62 37 30 39 64 36 33 36 65 62 2E 6A 70 67 </StringToSignBytes>
  <EC>0002-00000040</EC>
</Error>

	at com.aliyun.oss.common.utils.ExceptionFactory.createOSSException(ExceptionFactory.java:99)
	at com.aliyun.oss.internal.OSSErrorResponseHandler.handle(OSSErrorResponseHandler.java:69)
	at com.aliyun.oss.common.comm.ServiceClient.handleResponse(ServiceClient.java:248)
	at com.aliyun.oss.common.comm.ServiceClient.sendRequestImpl(ServiceClient.java:130)
	at com.aliyun.oss.common.comm.ServiceClient.sendRequest(ServiceClient.java:68)
	at com.aliyun.oss.internal.OSSOperation.send(OSSOperation.java:94)
	at com.aliyun.oss.internal.OSSOperation.doOperation(OSSOperation.java:149)
	at com.aliyun.oss.internal.OSSOperation.doOperation(OSSOperation.java:113)
	at com.aliyun.oss.internal.OSSObjectOperation.writeObjectInternal(OSSObjectOperation.java:907)
	at com.aliyun.oss.internal.OSSObjectOperation.putObject(OSSObjectOperation.java:148)
	at com.aliyun.oss.OSSClient.putObject(OSSClient.java:475)
	at com.aliyun.oss.OSSClient.putObject(OSSClient.java:457)
	at com.aliyun.oss.OSSClient.putObject(OSSClient.java:451)
	at com.chat.message.config.AliyunCloudStorageService.upload(AliyunCloudStorageService.java:36)
	at com.chat.message.config.AliyunCloudStorageService.upload(AliyunCloudStorageService.java:30)
	at com.chat.message.config.AliyunCloudStorageService.uploadSuffix(AliyunCloudStorageService.java:47)
	at com.chat.message.web.MobileMediaUploadController.upload(MobileMediaUploadController.java:33)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1064)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:228)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1723)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
2023-03-10 00:11:09.121 [http-nio-9999-exec-1] WARN  com.aliyun.oss - [Server]Unable to execute HTTP request: The request signature we calculated does not match the signature you provided. Check your key and signing method.
[ErrorCode]: SignatureDoesNotMatch
[RequestId]: 640A051A8A5A1435398B393C
[HostId]: ldzy-zhang.oss-cn-shenzhen.aliyuncs.com
[ResponseError]:
<?xml version="1.0" encoding="UTF-8"?>
<Error>
  <Code>SignatureDoesNotMatch</Code>
  <Message>The request signature we calculated does not match the signature you provided. Check your key and signing method.</Message>
  <RequestId>640A051A8A5A1435398B393C</RequestId>
  <HostId>ldzy-zhang.oss-cn-shenzhen.aliyuncs.com</HostId>
  <OSSAccessKeyId>LTAI5tRZssYLATQ7tWGtrMEZ</OSSAccessKeyId>
  <SignatureProvided>9nC2wOShiNZ/TLA0MuvNam/4OjI=</SignatureProvided>
  <StringToSign>PUT

image/jpeg
Thu, 09 Mar 2023 16:11:08 GMT
/ldzy-zhang/avatar/20230310/95d30885fa8c41c6b6574aebb520bbed.jpg</StringToSign>
  <StringToSignBytes>50 55 54 0A 0A 69 6D 61 67 65 2F 6A 70 65 67 0A 54 68 75 2C 20 30 39 20 4D 61 72 20 32 30 32 33 20 31 36 3A 31 31 3A 30 38 20 47 4D 54 0A 2F 6C 64 7A 79 2D 7A 68 61 6E 67 2F 61 76 61 74 61 72 2F 32 30 32 33 30 33 31 30 2F 39 35 64 33 30 38 38 35 66 61 38 63 34 31 63 36 62 36 35 37 34 61 65 62 62 35 32 30 62 62 65 64 2E 6A 70 67 </StringToSignBytes>
  <EC>0002-00000040</EC>
</Error>

2023-03-10 00:11:09.129 [http-nio-9999-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [/message-server] threw exception [Request processing failed; nested exception is java.lang.RuntimeException: 上传文件失败，请检查配置信息] with root cause
com.aliyun.oss.OSSException: The request signature we calculated does not match the signature you provided. Check your key and signing method.
[ErrorCode]: SignatureDoesNotMatch
[RequestId]: 640A051A8A5A1435398B393C
[HostId]: ldzy-zhang.oss-cn-shenzhen.aliyuncs.com
[ResponseError]:
<?xml version="1.0" encoding="UTF-8"?>
<Error>
  <Code>SignatureDoesNotMatch</Code>
  <Message>The request signature we calculated does not match the signature you provided. Check your key and signing method.</Message>
  <RequestId>640A051A8A5A1435398B393C</RequestId>
  <HostId>ldzy-zhang.oss-cn-shenzhen.aliyuncs.com</HostId>
  <OSSAccessKeyId>LTAI5tRZssYLATQ7tWGtrMEZ</OSSAccessKeyId>
  <SignatureProvided>9nC2wOShiNZ/TLA0MuvNam/4OjI=</SignatureProvided>
  <StringToSign>PUT

image/jpeg
Thu, 09 Mar 2023 16:11:08 GMT
/ldzy-zhang/avatar/20230310/95d30885fa8c41c6b6574aebb520bbed.jpg</StringToSign>
  <StringToSignBytes>50 55 54 0A 0A 69 6D 61 67 65 2F 6A 70 65 67 0A 54 68 75 2C 20 30 39 20 4D 61 72 20 32 30 32 33 20 31 36 3A 31 31 3A 30 38 20 47 4D 54 0A 2F 6C 64 7A 79 2D 7A 68 61 6E 67 2F 61 76 61 74 61 72 2F 32 30 32 33 30 33 31 30 2F 39 35 64 33 30 38 38 35 66 61 38 63 34 31 63 36 62 36 35 37 34 61 65 62 62 35 32 30 62 62 65 64 2E 6A 70 67 </StringToSignBytes>
  <EC>0002-00000040</EC>
</Error>

	at com.aliyun.oss.common.utils.ExceptionFactory.createOSSException(ExceptionFactory.java:99)
	at com.aliyun.oss.internal.OSSErrorResponseHandler.handle(OSSErrorResponseHandler.java:69)
	at com.aliyun.oss.common.comm.ServiceClient.handleResponse(ServiceClient.java:248)
	at com.aliyun.oss.common.comm.ServiceClient.sendRequestImpl(ServiceClient.java:130)
	at com.aliyun.oss.common.comm.ServiceClient.sendRequest(ServiceClient.java:68)
	at com.aliyun.oss.internal.OSSOperation.send(OSSOperation.java:94)
	at com.aliyun.oss.internal.OSSOperation.doOperation(OSSOperation.java:149)
	at com.aliyun.oss.internal.OSSOperation.doOperation(OSSOperation.java:113)
	at com.aliyun.oss.internal.OSSObjectOperation.writeObjectInternal(OSSObjectOperation.java:907)
	at com.aliyun.oss.internal.OSSObjectOperation.putObject(OSSObjectOperation.java:148)
	at com.aliyun.oss.OSSClient.putObject(OSSClient.java:475)
	at com.aliyun.oss.OSSClient.putObject(OSSClient.java:457)
	at com.aliyun.oss.OSSClient.putObject(OSSClient.java:451)
	at com.chat.message.config.AliyunCloudStorageService.upload(AliyunCloudStorageService.java:36)
	at com.chat.message.config.AliyunCloudStorageService.upload(AliyunCloudStorageService.java:30)
	at com.chat.message.config.AliyunCloudStorageService.uploadSuffix(AliyunCloudStorageService.java:47)
	at com.chat.message.web.MobileMediaUploadController.upload(MobileMediaUploadController.java:33)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1064)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:228)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1723)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
2023-03-10 08:53:12.817 [restartedMain] INFO  com.chat.message.MessageApplication - Starting MessageApplication using Java 1.8.0_102 on LAPTOP-2IRQMR2A with PID 13144 (C:\Users\张强\Documents\WeChat Files\wxid_68p7c2r277zq22\FileStorage\File\2023-02\applet-chat\target\classes started by 张强 in C:\Users\张强\Documents\WeChat Files\wxid_68p7c2r277zq22\FileStorage\File\2023-02\applet-chat)
2023-03-10 08:53:12.819 [restartedMain] DEBUG com.chat.message.MessageApplication - Running with Spring Boot v2.5.3, Spring v5.3.9
2023-03-10 08:53:12.819 [restartedMain] INFO  com.chat.message.MessageApplication - The following profiles are active: dev
2023-03-10 08:53:12.864 [restartedMain] INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2023-03-10 08:53:12.864 [restartedMain] INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2023-03-10 08:53:13.942 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 9999 (http)
2023-03-10 08:53:13.951 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-9999"]
2023-03-10 08:53:13.951 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2023-03-10 08:53:13.952 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.50]
2023-03-10 08:53:14.057 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/message-server] - Initializing Spring embedded WebApplicationContext
2023-03-10 08:53:14.057 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1193 ms
2023-03-10 08:53:14.223 [restartedMain] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2023-03-10 08:53:14.477 [restartedMain] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2023-03-10 08:53:15.677 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2023-03-10 08:53:15.697 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-9999"]
2023-03-10 08:53:15.710 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 9999 (http) with context path '/message-server'
2023-03-10 08:53:15.719 [restartedMain] INFO  com.chat.message.MessageApplication - Started MessageApplication in 3.393 seconds (JVM running for 4.81)
2023-03-10 08:53:20.918 [http-nio-9999-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/message-server] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-03-10 08:53:20.919 [http-nio-9999-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2023-03-10 08:53:20.920 [http-nio-9999-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2023-03-10 08:53:21.027 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.UserDao.selectList - ==>  Preparing: SELECT id,name,avatar,open_id FROM user WHERE (open_id <> ?) 
2023-03-10 08:53:21.066 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.UserDao.selectList - ==> Parameters: 1111(String)
2023-03-10 08:53:21.097 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.UserDao.selectList - <==      Total: 5
2023-03-10 08:53:26.582 [http-nio-9999-exec-3] DEBUG com.chat.message.dao.UserDao.selectList - ==>  Preparing: SELECT id,name,avatar,open_id FROM user WHERE (open_id = ?) 
2023-03-10 08:53:26.582 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.UserDao.selectList - ==>  Preparing: SELECT id,name,avatar,open_id FROM user WHERE (open_id = ?) 
2023-03-10 08:53:26.583 [http-nio-9999-exec-3] DEBUG com.chat.message.dao.UserDao.selectList - ==> Parameters: 2222(String)
2023-03-10 08:53:26.583 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.UserDao.selectList - ==> Parameters: 1111(String)
2023-03-10 08:53:26.584 [http-nio-9999-exec-3] DEBUG com.chat.message.dao.UserDao.selectList - <==      Total: 1
2023-03-10 08:53:26.590 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.UserDao.selectList - <==      Total: 1
2023-03-10 08:53:26.739 [http-nio-9999-exec-9] DEBUG com.chat.message.dao.MessageDao.selectPage - ==>  Preparing: SELECT COUNT(1) FROM message WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) 
2023-03-10 08:53:26.740 [http-nio-9999-exec-9] DEBUG com.chat.message.dao.MessageDao.selectPage - ==> Parameters: 0(Integer), 0(Long), 2(Long), 0(Long), 2(Long)
2023-03-10 08:53:26.752 [http-nio-9999-exec-7] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:2
2023-03-10 08:53:26.761 [http-nio-9999-exec-9] DEBUG com.chat.message.dao.MessageDao.selectPage - ==>  Preparing: SELECT id,type,content,content_type,is_read,sender,receiver,request_id,is_last,created_by,created_time,updated_by,updated_time,del_flag,status,remarks FROM message WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) ORDER BY created_time DESC LIMIT ?,? 
2023-03-10 08:53:26.762 [http-nio-9999-exec-9] DEBUG com.chat.message.dao.MessageDao.selectPage - ==> Parameters: 0(Integer), 0(Long), 2(Long), 0(Long), 2(Long), 0(Long), 2(Long)
2023-03-10 08:53:26.766 [http-nio-9999-exec-9] DEBUG com.chat.message.dao.MessageDao.selectPage - <==      Total: 2
2023-03-10 08:53:26.770 [http-nio-9999-exec-9] DEBUG com.chat.message.dao.MessageDao.update - ==>  Preparing: UPDATE message SET is_read=? WHERE (del_flag = ? AND sender = ? AND receiver = ?) 
2023-03-10 08:53:26.772 [http-nio-9999-exec-9] DEBUG com.chat.message.dao.MessageDao.update - ==> Parameters: 1(Integer), 0(Integer), 2(Long), 0(Long)
2023-03-10 08:53:26.773 [http-nio-9999-exec-9] DEBUG com.chat.message.dao.MessageDao.update - <==    Updates: 0
2023-03-10 08:53:39.048 [http-nio-9999-exec-4] WARN  com.aliyun.oss - [Server]Unable to execute HTTP request: The request signature we calculated does not match the signature you provided. Check your key and signing method.
[ErrorCode]: SignatureDoesNotMatch
[RequestId]: 640A7F90732F6638327E031D
[HostId]: ldzy-zhang.oss-cn-shenzhen.aliyuncs.com
[ResponseError]:
<?xml version="1.0" encoding="UTF-8"?>
<Error>
  <Code>SignatureDoesNotMatch</Code>
  <Message>The request signature we calculated does not match the signature you provided. Check your key and signing method.</Message>
  <RequestId>640A7F90732F6638327E031D</RequestId>
  <HostId>ldzy-zhang.oss-cn-shenzhen.aliyuncs.com</HostId>
  <OSSAccessKeyId>LTAI5tRZssYLATQ7tWGtrMEZ</OSSAccessKeyId>
  <SignatureProvided>XRJmur9vgCTCC0dn6HEeWg0RZgE=</SignatureProvided>
  <StringToSign>PUT

image/jpeg
Fri, 10 Mar 2023 00:53:37 GMT
/ldzy-zhang/avatar/20230310/6f7792e3d9254e018cedf42925b738be.jpg</StringToSign>
  <StringToSignBytes>50 55 54 0A 0A 69 6D 61 67 65 2F 6A 70 65 67 0A 46 72 69 2C 20 31 30 20 4D 61 72 20 32 30 32 33 20 30 30 3A 35 33 3A 33 37 20 47 4D 54 0A 2F 6C 64 7A 79 2D 7A 68 61 6E 67 2F 61 76 61 74 61 72 2F 32 30 32 33 30 33 31 30 2F 36 66 37 37 39 32 65 33 64 39 32 35 34 65 30 31 38 63 65 64 66 34 32 39 32 35 62 37 33 38 62 65 2E 6A 70 67 </StringToSignBytes>
  <EC>0002-00000040</EC>
</Error>

2023-03-10 08:53:39.060 [http-nio-9999-exec-4] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [/message-server] threw exception [Request processing failed; nested exception is java.lang.RuntimeException: 上传文件失败，请检查配置信息] with root cause
com.aliyun.oss.OSSException: The request signature we calculated does not match the signature you provided. Check your key and signing method.
[ErrorCode]: SignatureDoesNotMatch
[RequestId]: 640A7F90732F6638327E031D
[HostId]: ldzy-zhang.oss-cn-shenzhen.aliyuncs.com
[ResponseError]:
<?xml version="1.0" encoding="UTF-8"?>
<Error>
  <Code>SignatureDoesNotMatch</Code>
  <Message>The request signature we calculated does not match the signature you provided. Check your key and signing method.</Message>
  <RequestId>640A7F90732F6638327E031D</RequestId>
  <HostId>ldzy-zhang.oss-cn-shenzhen.aliyuncs.com</HostId>
  <OSSAccessKeyId>LTAI5tRZssYLATQ7tWGtrMEZ</OSSAccessKeyId>
  <SignatureProvided>XRJmur9vgCTCC0dn6HEeWg0RZgE=</SignatureProvided>
  <StringToSign>PUT

image/jpeg
Fri, 10 Mar 2023 00:53:37 GMT
/ldzy-zhang/avatar/20230310/6f7792e3d9254e018cedf42925b738be.jpg</StringToSign>
  <StringToSignBytes>50 55 54 0A 0A 69 6D 61 67 65 2F 6A 70 65 67 0A 46 72 69 2C 20 31 30 20 4D 61 72 20 32 30 32 33 20 30 30 3A 35 33 3A 33 37 20 47 4D 54 0A 2F 6C 64 7A 79 2D 7A 68 61 6E 67 2F 61 76 61 74 61 72 2F 32 30 32 33 30 33 31 30 2F 36 66 37 37 39 32 65 33 64 39 32 35 34 65 30 31 38 63 65 64 66 34 32 39 32 35 62 37 33 38 62 65 2E 6A 70 67 </StringToSignBytes>
  <EC>0002-00000040</EC>
</Error>

	at com.aliyun.oss.common.utils.ExceptionFactory.createOSSException(ExceptionFactory.java:99)
	at com.aliyun.oss.internal.OSSErrorResponseHandler.handle(OSSErrorResponseHandler.java:69)
	at com.aliyun.oss.common.comm.ServiceClient.handleResponse(ServiceClient.java:248)
	at com.aliyun.oss.common.comm.ServiceClient.sendRequestImpl(ServiceClient.java:130)
	at com.aliyun.oss.common.comm.ServiceClient.sendRequest(ServiceClient.java:68)
	at com.aliyun.oss.internal.OSSOperation.send(OSSOperation.java:94)
	at com.aliyun.oss.internal.OSSOperation.doOperation(OSSOperation.java:149)
	at com.aliyun.oss.internal.OSSOperation.doOperation(OSSOperation.java:113)
	at com.aliyun.oss.internal.OSSObjectOperation.writeObjectInternal(OSSObjectOperation.java:907)
	at com.aliyun.oss.internal.OSSObjectOperation.putObject(OSSObjectOperation.java:148)
	at com.aliyun.oss.OSSClient.putObject(OSSClient.java:475)
	at com.aliyun.oss.OSSClient.putObject(OSSClient.java:457)
	at com.aliyun.oss.OSSClient.putObject(OSSClient.java:451)
	at com.chat.message.config.AliyunCloudStorageService.upload(AliyunCloudStorageService.java:36)
	at com.chat.message.config.AliyunCloudStorageService.upload(AliyunCloudStorageService.java:30)
	at com.chat.message.config.AliyunCloudStorageService.uploadSuffix(AliyunCloudStorageService.java:47)
	at com.chat.message.web.MobileMediaUploadController.upload(MobileMediaUploadController.java:33)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1064)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:228)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1723)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
2023-03-10 08:53:39.592 [http-nio-9999-exec-8] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:2
2023-03-10 09:18:18.585 [restartedMain] INFO  com.chat.message.MessageApplication - Starting MessageApplication using Java 1.8.0_102 on LAPTOP-2IRQMR2A with PID 3156 (C:\Users\张强\Documents\WeChat Files\wxid_68p7c2r277zq22\FileStorage\File\2023-02\applet-chat\target\classes started by 张强 in C:\Users\张强\Documents\WeChat Files\wxid_68p7c2r277zq22\FileStorage\File\2023-02\applet-chat)
2023-03-10 09:18:18.588 [restartedMain] DEBUG com.chat.message.MessageApplication - Running with Spring Boot v2.5.3, Spring v5.3.9
2023-03-10 09:18:18.588 [restartedMain] INFO  com.chat.message.MessageApplication - The following profiles are active: dev
2023-03-10 09:18:18.631 [restartedMain] INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2023-03-10 09:18:18.631 [restartedMain] INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2023-03-10 09:18:19.685 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 9999 (http)
2023-03-10 09:18:19.694 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-9999"]
2023-03-10 09:18:19.695 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2023-03-10 09:18:19.695 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.50]
2023-03-10 09:18:19.833 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/message-server] - Initializing Spring embedded WebApplicationContext
2023-03-10 09:18:19.833 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1201 ms
2023-03-10 09:18:19.992 [restartedMain] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2023-03-10 09:18:20.244 [restartedMain] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2023-03-10 09:18:21.613 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2023-03-10 09:18:21.637 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-9999"]
2023-03-10 09:18:21.654 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 9999 (http) with context path '/message-server'
2023-03-10 09:18:21.663 [restartedMain] INFO  com.chat.message.MessageApplication - Started MessageApplication in 3.584 seconds (JVM running for 5.034)
2023-03-10 09:18:22.024 [http-nio-9999-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/message-server] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-03-10 09:18:22.024 [http-nio-9999-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2023-03-10 09:18:22.025 [http-nio-9999-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2023-03-10 09:18:22.078 [http-nio-9999-exec-1] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:2
2023-03-10 09:18:30.554 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.MessageDao.update - ==>  Preparing: UPDATE message SET is_last=? WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) 
2023-03-10 09:18:30.573 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.MessageDao.update - ==> Parameters: 0(Integer), 0(Integer), 0(Long), 2(Long), 0(Long), 2(Long)
2023-03-10 09:18:30.580 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.MessageDao.update - <==    Updates: 24
2023-03-10 09:18:30.583 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.MessageDao.insert - ==>  Preparing: INSERT INTO message ( type, content, content_type, is_read, sender, receiver, request_id, is_last, created_by, created_time, updated_by, updated_time, del_flag ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2023-03-10 09:18:30.587 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.MessageDao.insert - ==> Parameters: 0(Integer), [{"type":2,"content":"[发呆]","imageClass":"smiley_3"}](String), 0(Integer), 0(String), 0(Long), 2(Long), 0f1d124d-7b67-4751-83e2-5a8cf719bd22(String), true(Boolean), null, 2023-03-10 09:18:30.489(Timestamp), null, null, 0(String)
2023-03-10 09:18:30.589 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.MessageDao.insert - <==    Updates: 1
2023-03-10 09:18:39.212 [http-nio-9999-exec-5] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:2
2023-03-10 09:20:35.347 [restartedMain] INFO  com.chat.message.MessageApplication - Starting MessageApplication using Java 1.8.0_102 on LAPTOP-2IRQMR2A with PID 10204 (C:\Users\张强\Documents\WeChat Files\wxid_68p7c2r277zq22\FileStorage\File\2023-02\applet-chat\target\classes started by 张强 in C:\Users\张强\Documents\WeChat Files\wxid_68p7c2r277zq22\FileStorage\File\2023-02\applet-chat)
2023-03-10 09:20:35.349 [restartedMain] DEBUG com.chat.message.MessageApplication - Running with Spring Boot v2.5.3, Spring v5.3.9
2023-03-10 09:20:35.349 [restartedMain] INFO  com.chat.message.MessageApplication - The following profiles are active: dev
2023-03-10 09:20:35.395 [restartedMain] INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2023-03-10 09:20:35.395 [restartedMain] INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2023-03-10 09:20:36.389 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 9999 (http)
2023-03-10 09:20:36.397 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-9999"]
2023-03-10 09:20:36.397 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2023-03-10 09:20:36.398 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.50]
2023-03-10 09:20:36.502 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/message-server] - Initializing Spring embedded WebApplicationContext
2023-03-10 09:20:36.502 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1107 ms
2023-03-10 09:20:36.649 [restartedMain] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2023-03-10 09:20:36.878 [restartedMain] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2023-03-10 09:20:38.154 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2023-03-10 09:20:38.172 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-9999"]
2023-03-10 09:20:38.184 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 9999 (http) with context path '/message-server'
2023-03-10 09:20:38.193 [restartedMain] INFO  com.chat.message.MessageApplication - Started MessageApplication in 3.344 seconds (JVM running for 4.718)
2023-03-10 09:20:38.568 [http-nio-9999-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/message-server] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-03-10 09:20:38.569 [http-nio-9999-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2023-03-10 09:20:38.569 [http-nio-9999-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2023-03-10 09:20:38.616 [http-nio-9999-exec-1] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:2
2023-03-10 09:20:45.179 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.MessageDao.update - ==>  Preparing: UPDATE message SET is_last=? WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) 
2023-03-10 09:20:45.199 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.MessageDao.update - ==> Parameters: 0(Integer), 0(Integer), 0(Long), 2(Long), 0(Long), 2(Long)
2023-03-10 09:20:45.204 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.MessageDao.update - <==    Updates: 25
2023-03-10 09:20:45.207 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.MessageDao.insert - ==>  Preparing: INSERT INTO message ( type, content, content_type, is_read, sender, receiver, request_id, is_last, created_by, created_time, updated_by, updated_time, del_flag ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2023-03-10 09:20:45.210 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.MessageDao.insert - ==> Parameters: 0(Integer), [{"type":2,"content":"[微笑]","imageClass":"smiley_0"}](String), 0(Integer), 0(String), 0(Long), 2(Long), eaccbd38-a943-4203-8365-336960ba3980(String), true(Boolean), null, 2023-03-10 09:20:45.12(Timestamp), null, null, 0(String)
2023-03-10 09:20:45.211 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.MessageDao.insert - <==    Updates: 1
2023-03-10 09:20:53.587 [http-nio-9999-exec-4] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:2
2023-03-10 09:21:03.079 [http-nio-9999-exec-6] INFO  com.chat.message.web.WebSocketOneToOneController - 此二人聊天，距离上一次聊天时间相差分钟数：1
2023-03-10 09:21:03.081 [http-nio-9999-exec-6] DEBUG com.chat.message.dao.MessageDao.update - ==>  Preparing: UPDATE message SET is_last=? WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) 
2023-03-10 09:21:03.081 [http-nio-9999-exec-6] DEBUG com.chat.message.dao.MessageDao.update - ==> Parameters: 0(Integer), 0(Integer), 0(Long), 2(Long), 0(Long), 2(Long)
2023-03-10 09:21:03.082 [http-nio-9999-exec-6] DEBUG com.chat.message.dao.MessageDao.update - <==    Updates: 26
2023-03-10 09:21:03.083 [http-nio-9999-exec-6] DEBUG com.chat.message.dao.MessageDao.insert - ==>  Preparing: INSERT INTO message ( type, content, content_type, is_read, sender, receiver, request_id, is_last, created_by, created_time, updated_by, updated_time, del_flag ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2023-03-10 09:21:03.083 [http-nio-9999-exec-6] DEBUG com.chat.message.dao.MessageDao.insert - ==> Parameters: 0(Integer), https://ldzy-zhang.oss-cn-shenzhen.aliyuncs.com/avatar//20230310/fb71b305b05a4e699a3902c8c92da643.bmp(String), 1(Integer), 0(String), 0(Long), 2(Long), 7ac2dc5b-6238-4392-80d4-1080a239051b(String), true(Boolean), null, 2023-03-10 09:21:03.045(Timestamp), null, null, 0(String)
2023-03-10 09:21:03.087 [http-nio-9999-exec-6] DEBUG com.chat.message.dao.MessageDao.insert - <==    Updates: 1
2023-03-10 09:21:34.975 [http-nio-9999-exec-8] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:2
2023-03-10 09:21:40.324 [http-nio-9999-exec-10] INFO  com.chat.message.web.WebSocketOneToOneController - 此二人聊天，距离上一次聊天时间相差分钟数：0
2023-03-10 09:21:40.327 [http-nio-9999-exec-10] DEBUG com.chat.message.dao.MessageDao.update - ==>  Preparing: UPDATE message SET is_last=? WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) 
2023-03-10 09:21:40.328 [http-nio-9999-exec-10] DEBUG com.chat.message.dao.MessageDao.update - ==> Parameters: 0(Integer), 0(Integer), 0(Long), 2(Long), 0(Long), 2(Long)
2023-03-10 09:21:40.330 [http-nio-9999-exec-10] DEBUG com.chat.message.dao.MessageDao.update - <==    Updates: 27
2023-03-10 09:21:40.331 [http-nio-9999-exec-10] DEBUG com.chat.message.dao.MessageDao.insert - ==>  Preparing: INSERT INTO message ( type, content, content_type, is_read, sender, receiver, request_id, is_last, created_by, created_time, updated_by, updated_time, del_flag ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2023-03-10 09:21:40.332 [http-nio-9999-exec-10] DEBUG com.chat.message.dao.MessageDao.insert - ==> Parameters: 0(Integer), https://ldzy-zhang.oss-cn-shenzhen.aliyuncs.com/avatar//20230310/ab826f62f90740289361f29c982e71ec.mp4(String), 2(Integer), 0(String), 0(Long), 2(Long), 364e11f0-9d99-4bdd-8c9b-3c5a43377849(String), true(Boolean), null, 2023-03-10 09:21:40.324(Timestamp), null, null, 0(String)
2023-03-10 09:21:40.333 [http-nio-9999-exec-10] DEBUG com.chat.message.dao.MessageDao.insert - <==    Updates: 1
2023-03-10 09:22:18.565 [http-nio-9999-exec-2] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:2
2023-03-10 09:22:43.743 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.UserDao.selectList - ==>  Preparing: SELECT id,name,avatar,open_id FROM user WHERE (open_id = ?) 
2023-03-10 09:22:43.744 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.UserDao.selectList - ==> Parameters: 1111(String)
2023-03-10 09:22:43.745 [http-nio-9999-exec-4] DEBUG com.chat.message.dao.UserDao.selectList - ==>  Preparing: SELECT id,name,avatar,open_id FROM user WHERE (open_id = ?) 
2023-03-10 09:22:43.745 [http-nio-9999-exec-4] DEBUG com.chat.message.dao.UserDao.selectList - ==> Parameters: 3333(String)
2023-03-10 09:22:43.760 [http-nio-9999-exec-4] DEBUG com.chat.message.dao.UserDao.selectList - <==      Total: 1
2023-03-10 09:22:43.760 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.UserDao.selectList - <==      Total: 1
2023-03-10 09:22:44.069 [http-nio-9999-exec-6] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:3
2023-03-10 09:22:44.124 [http-nio-9999-exec-7] DEBUG com.chat.message.dao.MessageDao.selectPage - ==>  Preparing: SELECT COUNT(1) FROM message WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) 
2023-03-10 09:22:44.125 [http-nio-9999-exec-7] DEBUG com.chat.message.dao.MessageDao.selectPage - ==> Parameters: 0(Integer), 0(Long), 3(Long), 0(Long), 3(Long)
2023-03-10 09:22:44.128 [http-nio-9999-exec-7] DEBUG com.chat.message.dao.MessageDao.update - ==>  Preparing: UPDATE message SET is_read=? WHERE (del_flag = ? AND sender = ? AND receiver = ?) 
2023-03-10 09:22:44.128 [http-nio-9999-exec-7] DEBUG com.chat.message.dao.MessageDao.update - ==> Parameters: 1(Integer), 0(Integer), 3(Long), 0(Long)
2023-03-10 09:22:44.129 [http-nio-9999-exec-7] DEBUG com.chat.message.dao.MessageDao.update - <==    Updates: 0
2023-03-10 09:22:48.901 [http-nio-9999-exec-8] DEBUG com.chat.message.dao.MessageDao.update - ==>  Preparing: UPDATE message SET is_last=? WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) 
2023-03-10 09:22:48.902 [http-nio-9999-exec-8] DEBUG com.chat.message.dao.MessageDao.update - ==> Parameters: 0(Integer), 0(Integer), 0(Long), 3(Long), 0(Long), 3(Long)
2023-03-10 09:22:48.903 [http-nio-9999-exec-8] DEBUG com.chat.message.dao.MessageDao.update - <==    Updates: 0
2023-03-10 09:22:48.904 [http-nio-9999-exec-8] DEBUG com.chat.message.dao.MessageDao.insert - ==>  Preparing: INSERT INTO message ( type, content, content_type, is_read, sender, receiver, request_id, is_last, created_by, created_time, updated_by, updated_time, del_flag ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2023-03-10 09:22:48.907 [http-nio-9999-exec-8] DEBUG com.chat.message.dao.MessageDao.insert - ==> Parameters: 0(Integer), [{"type":2,"content":"[色]","imageClass":"smiley_2"}](String), 0(Integer), 0(String), 0(Long), 3(Long), 852d1410-371b-48b0-985e-209ca1bf9478(String), true(Boolean), null, 2023-03-10 09:22:48.899(Timestamp), null, null, 0(String)
2023-03-10 09:22:48.909 [http-nio-9999-exec-8] DEBUG com.chat.message.dao.MessageDao.insert - <==    Updates: 1
2023-03-10 09:22:57.131 [http-nio-9999-exec-9] DEBUG com.chat.message.dao.MessageDao.update - ==>  Preparing: UPDATE message SET is_last=? WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) 
2023-03-10 09:22:57.132 [http-nio-9999-exec-9] DEBUG com.chat.message.dao.MessageDao.update - ==> Parameters: 0(Integer), 0(Integer), 0(Long), 3(Long), 0(Long), 3(Long)
2023-03-10 09:22:57.133 [http-nio-9999-exec-9] DEBUG com.chat.message.dao.MessageDao.update - <==    Updates: 1
2023-03-10 09:22:57.134 [http-nio-9999-exec-9] DEBUG com.chat.message.dao.MessageDao.insert - ==>  Preparing: INSERT INTO message ( type, content, content_type, is_read, sender, receiver, request_id, is_last, created_by, created_time, updated_by, updated_time, del_flag ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2023-03-10 09:22:57.135 [http-nio-9999-exec-9] DEBUG com.chat.message.dao.MessageDao.insert - ==> Parameters: 0(Integer), [{"type":1,"content":"1"}](String), 0(Integer), 0(String), 0(Long), 3(Long), 18aa6031-41f3-4eed-8574-1e290f6dbd62(String), true(Boolean), null, 2023-03-10 09:22:57.129(Timestamp), null, null, 0(String)
2023-03-10 09:22:57.136 [http-nio-9999-exec-9] DEBUG com.chat.message.dao.MessageDao.insert - <==    Updates: 1
2023-03-10 09:23:01.987 [http-nio-9999-exec-3] DEBUG com.chat.message.dao.UserDao.selectList - ==>  Preparing: SELECT id,name,avatar,open_id FROM user WHERE (open_id = ?) 
2023-03-10 09:23:01.987 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.UserDao.selectList - ==>  Preparing: SELECT id,name,avatar,open_id FROM user WHERE (open_id = ?) 
2023-03-10 09:23:01.988 [http-nio-9999-exec-3] DEBUG com.chat.message.dao.UserDao.selectList - ==> Parameters: 4444(String)
2023-03-10 09:23:01.989 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.UserDao.selectList - ==> Parameters: 1111(String)
2023-03-10 09:23:01.990 [http-nio-9999-exec-3] DEBUG com.chat.message.dao.UserDao.selectList - <==      Total: 1
2023-03-10 09:23:01.991 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.UserDao.selectList - <==      Total: 1
2023-03-10 09:23:02.087 [http-nio-9999-exec-4] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:4
2023-03-10 09:23:02.101 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.selectPage - ==>  Preparing: SELECT COUNT(1) FROM message WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) 
2023-03-10 09:23:02.101 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.selectPage - ==> Parameters: 0(Integer), 0(Long), 4(Long), 0(Long), 4(Long)
2023-03-10 09:23:02.118 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.selectPage - ==>  Preparing: SELECT id,type,content,content_type,is_read,sender,receiver,request_id,is_last,created_by,created_time,updated_by,updated_time,del_flag,status,remarks FROM message WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) ORDER BY created_time DESC LIMIT ?,? 
2023-03-10 09:23:02.119 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.selectPage - ==> Parameters: 0(Integer), 0(Long), 4(Long), 0(Long), 4(Long), 0(Long), 2(Long)
2023-03-10 09:23:02.125 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.selectPage - <==      Total: 2
2023-03-10 09:23:02.127 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.update - ==>  Preparing: UPDATE message SET is_read=? WHERE (del_flag = ? AND sender = ? AND receiver = ?) 
2023-03-10 09:23:02.128 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.update - ==> Parameters: 1(Integer), 0(Integer), 4(Long), 0(Long)
2023-03-10 09:23:02.131 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.update - <==    Updates: 3
2023-03-10 09:23:04.714 [http-nio-9999-exec-7] DEBUG com.chat.message.dao.UserDao.selectList - ==>  Preparing: SELECT id,name,avatar,open_id FROM user WHERE (open_id = ?) 
2023-03-10 09:23:04.714 [http-nio-9999-exec-8] DEBUG com.chat.message.dao.UserDao.selectList - ==>  Preparing: SELECT id,name,avatar,open_id FROM user WHERE (open_id = ?) 
2023-03-10 09:23:04.714 [http-nio-9999-exec-7] DEBUG com.chat.message.dao.UserDao.selectList - ==> Parameters: 66(String)
2023-03-10 09:23:04.714 [http-nio-9999-exec-8] DEBUG com.chat.message.dao.UserDao.selectList - ==> Parameters: 1111(String)
2023-03-10 09:23:04.715 [http-nio-9999-exec-8] DEBUG com.chat.message.dao.UserDao.selectList - <==      Total: 1
2023-03-10 09:23:04.715 [http-nio-9999-exec-7] DEBUG com.chat.message.dao.UserDao.selectList - <==      Total: 1
2023-03-10 09:23:04.820 [http-nio-9999-exec-9] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:6
2023-03-10 09:23:04.827 [http-nio-9999-exec-10] DEBUG com.chat.message.dao.MessageDao.selectPage - ==>  Preparing: SELECT COUNT(1) FROM message WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) 
2023-03-10 09:23:04.829 [http-nio-9999-exec-10] DEBUG com.chat.message.dao.MessageDao.selectPage - ==> Parameters: 0(Integer), 0(Long), 6(Long), 0(Long), 6(Long)
2023-03-10 09:23:04.831 [http-nio-9999-exec-10] DEBUG com.chat.message.dao.MessageDao.selectPage - ==>  Preparing: SELECT id,type,content,content_type,is_read,sender,receiver,request_id,is_last,created_by,created_time,updated_by,updated_time,del_flag,status,remarks FROM message WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) ORDER BY created_time DESC LIMIT ?,? 
2023-03-10 09:23:04.832 [http-nio-9999-exec-10] DEBUG com.chat.message.dao.MessageDao.selectPage - ==> Parameters: 0(Integer), 0(Long), 6(Long), 0(Long), 6(Long), 0(Long), 2(Long)
2023-03-10 09:23:04.834 [http-nio-9999-exec-10] DEBUG com.chat.message.dao.MessageDao.selectPage - <==      Total: 2
2023-03-10 09:23:04.835 [http-nio-9999-exec-10] DEBUG com.chat.message.dao.MessageDao.update - ==>  Preparing: UPDATE message SET is_read=? WHERE (del_flag = ? AND sender = ? AND receiver = ?) 
2023-03-10 09:23:04.836 [http-nio-9999-exec-10] DEBUG com.chat.message.dao.MessageDao.update - ==> Parameters: 1(Integer), 0(Integer), 6(Long), 0(Long)
2023-03-10 09:23:04.837 [http-nio-9999-exec-10] DEBUG com.chat.message.dao.MessageDao.update - <==    Updates: 0
2023-03-10 09:23:08.221 [http-nio-9999-exec-1] INFO  com.chat.message.web.WebSocketOneToOneController - 此二人聊天，距离上一次聊天时间相差分钟数：562
2023-03-10 09:23:08.223 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.update - ==>  Preparing: UPDATE message SET is_last=? WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) 
2023-03-10 09:23:08.224 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.update - ==> Parameters: 0(Integer), 0(Integer), 0(Long), 6(Long), 0(Long), 6(Long)
2023-03-10 09:23:08.225 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.update - <==    Updates: 4
2023-03-10 09:23:08.227 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.insert - ==>  Preparing: INSERT INTO message ( type, content, content_type, is_read, sender, receiver, request_id, is_last, created_by, created_time, updated_by, updated_time, del_flag ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2023-03-10 09:23:08.228 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.insert - ==> Parameters: 1(Integer), [{"type":1,"content":"1"},{"type":2,"content":"[得意]","imageClass":"smiley_4"}](String), 0(Integer), 0(String), 0(Long), 6(Long), 9d753ac0-b490-42aa-9ce2-8e23b4a3f380(String), true(Boolean), null, 2023-03-10 09:23:08.221(Timestamp), null, null, 0(String)
2023-03-10 09:23:08.230 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.insert - <==    Updates: 1
2023-03-10 09:25:28.990 [http-nio-9999-exec-4] INFO  com.chat.message.web.WebSocketOneToOneController - 此二人聊天，距离上一次聊天时间相差分钟数：2
2023-03-10 09:25:29.001 [http-nio-9999-exec-4] DEBUG com.chat.message.dao.MessageDao.update - ==>  Preparing: UPDATE message SET is_last=? WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) 
2023-03-10 09:25:29.001 [http-nio-9999-exec-4] DEBUG com.chat.message.dao.MessageDao.update - ==> Parameters: 0(Integer), 0(Integer), 0(Long), 6(Long), 0(Long), 6(Long)
2023-03-10 09:25:29.006 [http-nio-9999-exec-4] DEBUG com.chat.message.dao.MessageDao.update - <==    Updates: 5
2023-03-10 09:25:29.006 [http-nio-9999-exec-4] DEBUG com.chat.message.dao.MessageDao.insert - ==>  Preparing: INSERT INTO message ( type, content, content_type, is_read, sender, receiver, request_id, is_last, created_by, created_time, updated_by, updated_time, del_flag ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2023-03-10 09:25:29.006 [http-nio-9999-exec-4] DEBUG com.chat.message.dao.MessageDao.insert - ==> Parameters: 0(Integer), [{"type":2,"content":"[抓狂]","imageClass":"smiley_18"}](String), 0(Integer), 0(String), 0(Long), 6(Long), 9bcf776b-f861-450f-8f7f-cafa0ab84ebf(String), true(Boolean), null, 2023-03-10 09:25:28.99(Timestamp), null, null, 0(String)
2023-03-10 09:25:29.006 [http-nio-9999-exec-4] DEBUG com.chat.message.dao.MessageDao.insert - <==    Updates: 1
2023-03-10 09:25:34.715 [http-nio-9999-exec-5] INFO  com.chat.message.web.WebSocketOneToOneController - 此二人聊天，距离上一次聊天时间相差分钟数：0
2023-03-10 09:25:34.715 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.update - ==>  Preparing: UPDATE message SET is_last=? WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) 
2023-03-10 09:25:34.715 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.update - ==> Parameters: 0(Integer), 0(Integer), 0(Long), 6(Long), 0(Long), 6(Long)
2023-03-10 09:25:34.715 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.update - <==    Updates: 6
2023-03-10 09:25:34.725 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.insert - ==>  Preparing: INSERT INTO message ( type, content, content_type, is_read, sender, receiver, request_id, is_last, created_by, created_time, updated_by, updated_time, del_flag ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2023-03-10 09:25:34.725 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.insert - ==> Parameters: 0(Integer), [{"type":1,"content":"123"}](String), 0(Integer), 0(String), 0(Long), 6(Long), a7cb3ae1-d241-48e5-8386-1c86e38328b2(String), true(Boolean), null, 2023-03-10 09:25:34.715(Timestamp), null, null, 0(String)
2023-03-10 09:25:34.725 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.insert - <==    Updates: 1
2023-03-10 09:25:42.136 [http-nio-9999-exec-7] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:6
2023-03-10 09:25:56.775 [http-nio-9999-exec-1] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:6
2023-03-10 09:25:57.466 [http-nio-9999-exec-3] DEBUG com.chat.message.dao.MessageDao.update - ==>  Preparing: UPDATE message SET is_last=? WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) 
2023-03-10 09:25:57.476 [http-nio-9999-exec-3] DEBUG com.chat.message.dao.MessageDao.update - ==> Parameters: 0(Integer), 0(Integer), 0(Long), 6(Long), 0(Long), 6(Long)
2023-03-10 09:25:57.476 [http-nio-9999-exec-3] DEBUG com.chat.message.dao.MessageDao.update - <==    Updates: 7
2023-03-10 09:25:57.476 [http-nio-9999-exec-3] DEBUG com.chat.message.dao.MessageDao.insert - ==>  Preparing: INSERT INTO message ( type, content, content_type, is_read, sender, receiver, request_id, is_last, created_by, created_time, updated_by, updated_time, del_flag ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2023-03-10 09:25:57.476 [http-nio-9999-exec-3] DEBUG com.chat.message.dao.MessageDao.insert - ==> Parameters: 0(Integer), https://ldzy-zhang.oss-cn-shenzhen.aliyuncs.com/avatar//20230310/c9bf5cf1632b4ea8b4e8970b02844563.mp4(String), 2(Integer), 0(String), 0(Long), 6(Long), 44e32bf6-6296-4fd3-afc7-d4cb41abe371(String), true(Boolean), null, 2023-03-10 09:25:57.466(Timestamp), null, null, 0(String)
2023-03-10 09:25:57.476 [http-nio-9999-exec-3] DEBUG com.chat.message.dao.MessageDao.insert - <==    Updates: 1
2023-03-10 09:27:55.200 [http-nio-9999-exec-5] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:6
2023-03-10 09:31:22.245 [restartedMain] INFO  com.chat.message.MessageApplication - Starting MessageApplication using Java 1.8.0_102 on LAPTOP-2IRQMR2A with PID 12284 (C:\Users\张强\Documents\WeChat Files\wxid_68p7c2r277zq22\FileStorage\File\2023-02\applet-chat\target\classes started by 张强 in C:\Users\张强\Documents\WeChat Files\wxid_68p7c2r277zq22\FileStorage\File\2023-02\applet-chat)
2023-03-10 09:31:22.250 [restartedMain] DEBUG com.chat.message.MessageApplication - Running with Spring Boot v2.5.3, Spring v5.3.9
2023-03-10 09:31:22.250 [restartedMain] INFO  com.chat.message.MessageApplication - The following profiles are active: dev
2023-03-10 09:31:22.295 [restartedMain] INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2023-03-10 09:31:22.295 [restartedMain] INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2023-03-10 09:31:23.425 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 9999 (http)
2023-03-10 09:31:23.440 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-9999"]
2023-03-10 09:31:23.445 [restartedMain] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2023-03-10 09:31:23.445 [restartedMain] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.50]
2023-03-10 09:31:23.575 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/message-server] - Initializing Spring embedded WebApplicationContext
2023-03-10 09:31:23.575 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1280 ms
2023-03-10 09:31:23.735 [restartedMain] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2023-03-10 09:31:23.995 [restartedMain] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2023-03-10 09:31:25.355 [restartedMain] INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer - LiveReload server is running on port 35729
2023-03-10 09:31:25.375 [restartedMain] INFO  org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-9999"]
2023-03-10 09:31:25.395 [restartedMain] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 9999 (http) with context path '/message-server'
2023-03-10 09:31:25.405 [restartedMain] INFO  com.chat.message.MessageApplication - Started MessageApplication in 3.702 seconds (JVM running for 5.155)
2023-03-10 09:31:25.705 [http-nio-9999-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/message-server] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-03-10 09:31:25.705 [http-nio-9999-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2023-03-10 09:31:25.715 [http-nio-9999-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 10 ms
2023-03-10 09:31:25.765 [http-nio-9999-exec-1] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:6
2023-03-10 09:31:43.491 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.UserDao.selectList - ==>  Preparing: SELECT id,name,avatar,open_id FROM user WHERE (open_id = ?) 
2023-03-10 09:31:43.491 [http-nio-9999-exec-4] DEBUG com.chat.message.dao.UserDao.selectList - ==>  Preparing: SELECT id,name,avatar,open_id FROM user WHERE (open_id = ?) 
2023-03-10 09:31:43.515 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.UserDao.selectList - ==> Parameters: 66(String)
2023-03-10 09:31:43.515 [http-nio-9999-exec-4] DEBUG com.chat.message.dao.UserDao.selectList - ==> Parameters: 1111(String)
2023-03-10 09:31:43.535 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.UserDao.selectList - <==      Total: 1
2023-03-10 09:31:43.535 [http-nio-9999-exec-4] DEBUG com.chat.message.dao.UserDao.selectList - <==      Total: 1
2023-03-10 09:31:43.713 [http-nio-9999-exec-3] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:6
2023-03-10 09:31:43.765 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.selectPage - ==>  Preparing: SELECT COUNT(1) FROM message WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) 
2023-03-10 09:31:43.765 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.selectPage - ==> Parameters: 0(Integer), 0(Long), 6(Long), 0(Long), 6(Long)
2023-03-10 09:31:43.775 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.selectPage - ==>  Preparing: SELECT id,type,content,content_type,is_read,sender,receiver,request_id,is_last,created_by,created_time,updated_by,updated_time,del_flag,status,remarks FROM message WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) ORDER BY created_time DESC LIMIT ?,? 
2023-03-10 09:31:43.775 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.selectPage - ==> Parameters: 0(Integer), 0(Long), 6(Long), 0(Long), 6(Long), 0(Long), 2(Long)
2023-03-10 09:31:43.775 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.selectPage - <==      Total: 2
2023-03-10 09:31:43.785 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.update - ==>  Preparing: UPDATE message SET is_read=? WHERE (del_flag = ? AND sender = ? AND receiver = ?) 
2023-03-10 09:31:43.785 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.update - ==> Parameters: 1(Integer), 0(Integer), 6(Long), 0(Long)
2023-03-10 09:31:43.785 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.update - <==    Updates: 0
2023-03-10 09:31:47.625 [http-nio-9999-exec-7] INFO  com.chat.message.web.WebSocketOneToOneController - 此二人聊天，距离上一次聊天时间相差分钟数：6
2023-03-10 09:31:47.645 [http-nio-9999-exec-7] DEBUG com.chat.message.dao.MessageDao.update - ==>  Preparing: UPDATE message SET is_last=? WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) 
2023-03-10 09:31:47.645 [http-nio-9999-exec-7] DEBUG com.chat.message.dao.MessageDao.update - ==> Parameters: 0(Integer), 0(Integer), 0(Long), 6(Long), 0(Long), 6(Long)
2023-03-10 09:31:47.645 [http-nio-9999-exec-7] DEBUG com.chat.message.dao.MessageDao.update - <==    Updates: 8
2023-03-10 09:31:47.645 [http-nio-9999-exec-7] DEBUG com.chat.message.dao.MessageDao.insert - ==>  Preparing: INSERT INTO message ( type, content, content_type, is_read, sender, receiver, request_id, is_last, created_by, created_time, updated_by, updated_time, del_flag ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2023-03-10 09:31:47.655 [http-nio-9999-exec-7] DEBUG com.chat.message.dao.MessageDao.insert - ==> Parameters: 1(Integer), [{"type":2,"content":"[微笑]","imageClass":"smiley_0"}](String), 0(Integer), 0(String), 0(Long), 6(Long), 604ae133-4231-455e-90d4-b8deb0a8bf3e(String), true(Boolean), null, 2023-03-10 09:31:47.601(Timestamp), null, null, 0(String)
2023-03-10 09:31:47.655 [http-nio-9999-exec-7] DEBUG com.chat.message.dao.MessageDao.insert - <==    Updates: 1
2023-03-10 09:31:57.495 [http-nio-9999-exec-6] DEBUG com.chat.message.dao.MessageDao.update - ==>  Preparing: UPDATE message SET is_last=? WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) 
2023-03-10 09:31:57.495 [http-nio-9999-exec-6] DEBUG com.chat.message.dao.MessageDao.update - ==> Parameters: 0(Integer), 0(Integer), 0(Long), 6(Long), 0(Long), 6(Long)
2023-03-10 09:31:57.495 [http-nio-9999-exec-6] DEBUG com.chat.message.dao.MessageDao.update - <==    Updates: 9
2023-03-10 09:31:57.495 [http-nio-9999-exec-6] DEBUG com.chat.message.dao.MessageDao.insert - ==>  Preparing: INSERT INTO message ( type, content, content_type, is_read, sender, receiver, request_id, is_last, created_by, created_time, updated_by, updated_time, del_flag ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2023-03-10 09:31:57.495 [http-nio-9999-exec-6] DEBUG com.chat.message.dao.MessageDao.insert - ==> Parameters: 0(Integer), [{"type":1,"content":"123"}](String), 0(Integer), 0(String), 0(Long), 6(Long), dedc101c-1112-494f-a7c5-399493bccf0f(String), true(Boolean), null, 2023-03-10 09:31:57.485(Timestamp), null, null, 0(String)
2023-03-10 09:31:57.495 [http-nio-9999-exec-6] DEBUG com.chat.message.dao.MessageDao.insert - <==    Updates: 1
2023-03-10 09:32:13.565 [http-nio-9999-exec-8] DEBUG com.chat.message.dao.UserDao.selectList - ==>  Preparing: SELECT id,name,avatar,open_id FROM user WHERE (open_id <> ?) 
2023-03-10 09:32:13.575 [http-nio-9999-exec-8] DEBUG com.chat.message.dao.UserDao.selectList - ==> Parameters: 1111(String)
2023-03-10 09:32:13.575 [http-nio-9999-exec-8] DEBUG com.chat.message.dao.UserDao.selectList - <==      Total: 5
2023-03-10 09:32:16.515 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.UserDao.selectList - ==>  Preparing: SELECT id,name,avatar,open_id FROM user WHERE (open_id = ?) 
2023-03-10 09:32:16.515 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.UserDao.selectList - ==> Parameters: 3333(String)
2023-03-10 09:32:16.515 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.UserDao.selectList - ==>  Preparing: SELECT id,name,avatar,open_id FROM user WHERE (open_id = ?) 
2023-03-10 09:32:16.515 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.UserDao.selectList - ==> Parameters: 1111(String)
2023-03-10 09:32:16.515 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.UserDao.selectList - <==      Total: 1
2023-03-10 09:32:16.515 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.UserDao.selectList - <==      Total: 1
2023-03-10 09:32:16.601 [http-nio-9999-exec-4] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:3
2023-03-10 09:32:16.615 [http-nio-9999-exec-3] DEBUG com.chat.message.dao.MessageDao.selectPage - ==>  Preparing: SELECT COUNT(1) FROM message WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) 
2023-03-10 09:32:16.615 [http-nio-9999-exec-3] DEBUG com.chat.message.dao.MessageDao.selectPage - ==> Parameters: 0(Integer), 0(Long), 3(Long), 0(Long), 3(Long)
2023-03-10 09:32:16.625 [http-nio-9999-exec-3] DEBUG com.chat.message.dao.MessageDao.selectPage - ==>  Preparing: SELECT id,type,content,content_type,is_read,sender,receiver,request_id,is_last,created_by,created_time,updated_by,updated_time,del_flag,status,remarks FROM message WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) ORDER BY created_time DESC LIMIT ?,? 
2023-03-10 09:32:16.625 [http-nio-9999-exec-3] DEBUG com.chat.message.dao.MessageDao.selectPage - ==> Parameters: 0(Integer), 0(Long), 3(Long), 0(Long), 3(Long), 0(Long), 2(Long)
2023-03-10 09:32:16.625 [http-nio-9999-exec-3] DEBUG com.chat.message.dao.MessageDao.selectPage - <==      Total: 2
2023-03-10 09:32:16.630 [http-nio-9999-exec-3] DEBUG com.chat.message.dao.MessageDao.update - ==>  Preparing: UPDATE message SET is_read=? WHERE (del_flag = ? AND sender = ? AND receiver = ?) 
2023-03-10 09:32:16.630 [http-nio-9999-exec-3] DEBUG com.chat.message.dao.MessageDao.update - ==> Parameters: 1(Integer), 0(Integer), 3(Long), 0(Long)
2023-03-10 09:32:16.630 [http-nio-9999-exec-3] DEBUG com.chat.message.dao.MessageDao.update - <==    Updates: 0
2023-03-10 09:32:19.372 [http-nio-9999-exec-5] INFO  com.chat.message.web.WebSocketOneToOneController - 此二人聊天，距离上一次聊天时间相差分钟数：10
2023-03-10 09:32:19.375 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.update - ==>  Preparing: UPDATE message SET is_last=? WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) 
2023-03-10 09:32:19.375 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.update - ==> Parameters: 0(Integer), 0(Integer), 0(Long), 3(Long), 0(Long), 3(Long)
2023-03-10 09:32:19.375 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.update - <==    Updates: 2
2023-03-10 09:32:19.375 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.insert - ==>  Preparing: INSERT INTO message ( type, content, content_type, is_read, sender, receiver, request_id, is_last, created_by, created_time, updated_by, updated_time, del_flag ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2023-03-10 09:32:19.375 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.insert - ==> Parameters: 1(Integer), [{"type":2,"content":"[得意]","imageClass":"smiley_4"}](String), 0(Integer), 0(String), 0(Long), 3(Long), d78480b5-8455-4641-87d9-90f7e72801a6(String), true(Boolean), null, 2023-03-10 09:32:19.372(Timestamp), null, null, 0(String)
2023-03-10 09:32:19.385 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.insert - <==    Updates: 1
2023-03-10 09:32:36.123 [http-nio-9999-exec-6] DEBUG com.chat.message.dao.UserDao.selectList - ==>  Preparing: SELECT id,name,avatar,open_id FROM user WHERE (open_id <> ?) 
2023-03-10 09:32:36.123 [http-nio-9999-exec-6] DEBUG com.chat.message.dao.UserDao.selectList - ==> Parameters: 1111(String)
2023-03-10 09:32:36.123 [http-nio-9999-exec-6] DEBUG com.chat.message.dao.UserDao.selectList - <==      Total: 5
2023-03-10 09:32:37.945 [http-nio-9999-exec-10] DEBUG com.chat.message.dao.UserDao.selectList - ==>  Preparing: SELECT id,name,avatar,open_id FROM user WHERE (open_id = ?) 
2023-03-10 09:32:37.945 [http-nio-9999-exec-10] DEBUG com.chat.message.dao.UserDao.selectList - ==> Parameters: 4444(String)
2023-03-10 09:32:37.945 [http-nio-9999-exec-9] DEBUG com.chat.message.dao.UserDao.selectList - ==>  Preparing: SELECT id,name,avatar,open_id FROM user WHERE (open_id = ?) 
2023-03-10 09:32:37.945 [http-nio-9999-exec-10] DEBUG com.chat.message.dao.UserDao.selectList - <==      Total: 1
2023-03-10 09:32:37.945 [http-nio-9999-exec-9] DEBUG com.chat.message.dao.UserDao.selectList - ==> Parameters: 1111(String)
2023-03-10 09:32:37.955 [http-nio-9999-exec-9] DEBUG com.chat.message.dao.UserDao.selectList - <==      Total: 1
2023-03-10 09:32:38.085 [http-nio-9999-exec-8] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:4
2023-03-10 09:32:38.105 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.selectPage - ==>  Preparing: SELECT COUNT(1) FROM message WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) 
2023-03-10 09:32:38.115 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.selectPage - ==> Parameters: 0(Integer), 0(Long), 4(Long), 0(Long), 4(Long)
2023-03-10 09:32:38.115 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.selectPage - ==>  Preparing: SELECT id,type,content,content_type,is_read,sender,receiver,request_id,is_last,created_by,created_time,updated_by,updated_time,del_flag,status,remarks FROM message WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) ORDER BY created_time DESC LIMIT ?,? 
2023-03-10 09:32:38.115 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.selectPage - ==> Parameters: 0(Integer), 0(Long), 4(Long), 0(Long), 4(Long), 0(Long), 2(Long)
2023-03-10 09:32:38.115 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.selectPage - <==      Total: 2
2023-03-10 09:32:38.115 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.update - ==>  Preparing: UPDATE message SET is_read=? WHERE (del_flag = ? AND sender = ? AND receiver = ?) 
2023-03-10 09:32:38.115 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.update - ==> Parameters: 1(Integer), 0(Integer), 4(Long), 0(Long)
2023-03-10 09:32:38.115 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.update - <==    Updates: 3
2023-03-10 09:32:41.145 [http-nio-9999-exec-2] INFO  com.chat.message.web.WebSocketOneToOneController - 此二人聊天，距离上一次聊天时间相差分钟数：618
2023-03-10 09:32:41.145 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.MessageDao.update - ==>  Preparing: UPDATE message SET is_last=? WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) 
2023-03-10 09:32:41.145 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.MessageDao.update - ==> Parameters: 0(Integer), 0(Integer), 0(Long), 4(Long), 0(Long), 4(Long)
2023-03-10 09:32:41.145 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.MessageDao.update - <==    Updates: 12
2023-03-10 09:32:41.155 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.MessageDao.insert - ==>  Preparing: INSERT INTO message ( type, content, content_type, is_read, sender, receiver, request_id, is_last, created_by, created_time, updated_by, updated_time, del_flag ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2023-03-10 09:32:41.155 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.MessageDao.insert - ==> Parameters: 1(Integer), [{"type":2,"content":"[抓狂]","imageClass":"smiley_18"}](String), 0(Integer), 0(String), 0(Long), 4(Long), 575ff96a-e7fe-4ab3-9bfc-d60ae5eea5b2(String), true(Boolean), null, 2023-03-10 09:32:41.145(Timestamp), null, null, 0(String)
2023-03-10 09:32:41.155 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.MessageDao.insert - <==    Updates: 1
2023-03-10 09:32:48.235 [http-nio-9999-exec-4] INFO  com.chat.message.web.WebSocketOneToOneController - 此二人聊天，距离上一次聊天时间相差分钟数：0
2023-03-10 09:32:48.235 [http-nio-9999-exec-4] DEBUG com.chat.message.dao.MessageDao.update - ==>  Preparing: UPDATE message SET is_last=? WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) 
2023-03-10 09:32:48.235 [http-nio-9999-exec-4] DEBUG com.chat.message.dao.MessageDao.update - ==> Parameters: 0(Integer), 0(Integer), 0(Long), 4(Long), 0(Long), 4(Long)
2023-03-10 09:32:48.235 [http-nio-9999-exec-4] DEBUG com.chat.message.dao.MessageDao.update - <==    Updates: 13
2023-03-10 09:32:48.235 [http-nio-9999-exec-4] DEBUG com.chat.message.dao.MessageDao.insert - ==>  Preparing: INSERT INTO message ( type, content, content_type, is_read, sender, receiver, request_id, is_last, created_by, created_time, updated_by, updated_time, del_flag ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2023-03-10 09:32:48.245 [http-nio-9999-exec-4] DEBUG com.chat.message.dao.MessageDao.insert - ==> Parameters: 0(Integer), [{"type":1,"content":"33"},{"type":2,"content":"[悠闲]","imageClass":"smiley_29"}](String), 0(Integer), 0(String), 0(Long), 4(Long), dd34de9d-67bc-4579-8eb2-47306a854ccb(String), true(Boolean), null, 2023-03-10 09:32:48.235(Timestamp), null, null, 0(String)
2023-03-10 09:32:48.245 [http-nio-9999-exec-4] DEBUG com.chat.message.dao.MessageDao.insert - <==    Updates: 1
2023-03-10 09:32:51.585 [http-nio-9999-exec-3] INFO  com.chat.message.web.WebSocketOneToOneController - 此二人聊天，距离上一次聊天时间相差分钟数：0
2023-03-10 09:32:51.585 [http-nio-9999-exec-3] DEBUG com.chat.message.dao.MessageDao.update - ==>  Preparing: UPDATE message SET is_last=? WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) 
2023-03-10 09:32:51.585 [http-nio-9999-exec-3] DEBUG com.chat.message.dao.MessageDao.update - ==> Parameters: 0(Integer), 0(Integer), 0(Long), 4(Long), 0(Long), 4(Long)
2023-03-10 09:32:51.585 [http-nio-9999-exec-3] DEBUG com.chat.message.dao.MessageDao.update - <==    Updates: 14
2023-03-10 09:32:51.585 [http-nio-9999-exec-3] DEBUG com.chat.message.dao.MessageDao.insert - ==>  Preparing: INSERT INTO message ( type, content, content_type, is_read, sender, receiver, request_id, is_last, created_by, created_time, updated_by, updated_time, del_flag ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2023-03-10 09:32:51.585 [http-nio-9999-exec-3] DEBUG com.chat.message.dao.MessageDao.insert - ==> Parameters: 0(Integer), [{"type":1,"content":"44"}](String), 0(Integer), 0(String), 0(Long), 4(Long), a0df1213-2ba9-4cd3-8f7f-b0def98d1b44(String), true(Boolean), null, 2023-03-10 09:32:51.585(Timestamp), null, null, 0(String)
2023-03-10 09:32:51.585 [http-nio-9999-exec-3] DEBUG com.chat.message.dao.MessageDao.insert - <==    Updates: 1
2023-03-10 09:32:59.302 [http-nio-9999-exec-6] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:4
2023-03-10 09:33:08.913 [http-nio-9999-exec-8] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:4
2023-03-10 09:33:10.075 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.update - ==>  Preparing: UPDATE message SET is_last=? WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) 
2023-03-10 09:33:10.075 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.update - ==> Parameters: 0(Integer), 0(Integer), 0(Long), 4(Long), 0(Long), 4(Long)
2023-03-10 09:33:10.075 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.update - <==    Updates: 15
2023-03-10 09:33:10.075 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.insert - ==>  Preparing: INSERT INTO message ( type, content, content_type, is_read, sender, receiver, request_id, is_last, created_by, created_time, updated_by, updated_time, del_flag ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2023-03-10 09:33:10.075 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.insert - ==> Parameters: 0(Integer), https://ldzy-zhang.oss-cn-shenzhen.aliyuncs.com/message/20230310/2ccf803ef3a948d692c92fe27abc3539.mp4(String), 2(Integer), 0(String), 0(Long), 4(Long), 7bcc0ce1-855b-40af-89e4-3dadc1202303(String), true(Boolean), null, 2023-03-10 09:33:10.075(Timestamp), null, null, 0(String)
2023-03-10 09:33:10.085 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.insert - <==    Updates: 1
2023-03-10 09:33:17.925 [http-nio-9999-exec-3] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:4
2023-03-10 09:33:43.215 [http-nio-9999-exec-8] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:4
2023-03-10 09:35:24.625 [http-nio-9999-exec-4] DEBUG com.chat.message.dao.UserDao.selectList - ==>  Preparing: SELECT id,name,avatar,open_id FROM user WHERE (open_id = ?) 
2023-03-10 09:35:24.625 [http-nio-9999-exec-4] DEBUG com.chat.message.dao.UserDao.selectList - ==> Parameters: 1111(String)
2023-03-10 09:35:24.635 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.UserDao.selectList - ==>  Preparing: SELECT id,name,avatar,open_id FROM user WHERE (open_id = ?) 
2023-03-10 09:35:24.635 [http-nio-9999-exec-4] DEBUG com.chat.message.dao.UserDao.selectList - <==      Total: 1
2023-03-10 09:35:24.635 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.UserDao.selectList - ==> Parameters: 2222(String)
2023-03-10 09:35:24.635 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.UserDao.selectList - <==      Total: 1
2023-03-10 09:35:24.745 [http-nio-9999-exec-3] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:2
2023-03-10 09:35:24.745 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.selectPage - ==>  Preparing: SELECT COUNT(1) FROM message WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) 
2023-03-10 09:35:24.745 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.selectPage - ==> Parameters: 0(Integer), 0(Long), 2(Long), 0(Long), 2(Long)
2023-03-10 09:35:24.745 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.selectPage - ==>  Preparing: SELECT id,type,content,content_type,is_read,sender,receiver,request_id,is_last,created_by,created_time,updated_by,updated_time,del_flag,status,remarks FROM message WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) ORDER BY created_time DESC LIMIT ?,? 
2023-03-10 09:35:24.745 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.selectPage - ==> Parameters: 0(Integer), 0(Long), 2(Long), 0(Long), 2(Long), 0(Long), 2(Long)
2023-03-10 09:35:24.755 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.selectPage - <==      Total: 2
2023-03-10 09:35:24.755 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.update - ==>  Preparing: UPDATE message SET is_read=? WHERE (del_flag = ? AND sender = ? AND receiver = ?) 
2023-03-10 09:35:24.755 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.update - ==> Parameters: 1(Integer), 0(Integer), 2(Long), 0(Long)
2023-03-10 09:35:24.755 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.update - <==    Updates: 0
2023-03-10 09:35:28.341 [http-nio-9999-exec-6] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:4
2023-03-10 09:35:31.900 [http-nio-9999-exec-8] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:2
2023-03-10 09:35:34.795 [http-nio-9999-exec-1] INFO  com.chat.message.web.WebSocketOneToOneController - 此二人聊天，距离上一次聊天时间相差分钟数：14
2023-03-10 09:35:34.795 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.update - ==>  Preparing: UPDATE message SET is_last=? WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) 
2023-03-10 09:35:34.795 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.update - ==> Parameters: 0(Integer), 0(Integer), 0(Long), 2(Long), 0(Long), 2(Long)
2023-03-10 09:35:34.795 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.update - <==    Updates: 28
2023-03-10 09:35:34.795 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.insert - ==>  Preparing: INSERT INTO message ( type, content, content_type, is_read, sender, receiver, request_id, is_last, created_by, created_time, updated_by, updated_time, del_flag ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2023-03-10 09:35:34.795 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.insert - ==> Parameters: 1(Integer), https://ldzy-zhang.oss-cn-shenzhen.aliyuncs.com/message/20230310/ff014042deb44e26bcf68b159ccff311.jpg(String), 1(Integer), 0(String), 0(Long), 2(Long), ce41b615-582e-449c-8ba8-488b40356b90(String), true(Boolean), null, 2023-03-10 09:35:34.795(Timestamp), null, null, 0(String)
2023-03-10 09:35:34.795 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.insert - <==    Updates: 1
2023-03-10 09:35:36.404 [http-nio-9999-exec-4] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:4
2023-03-10 09:35:40.195 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.UserDao.selectList - ==>  Preparing: SELECT id,name,avatar,open_id FROM user WHERE (open_id = ?) 
2023-03-10 09:35:40.195 [http-nio-9999-exec-7] DEBUG com.chat.message.dao.UserDao.selectList - ==>  Preparing: SELECT id,name,avatar,open_id FROM user WHERE (open_id = ?) 
2023-03-10 09:35:40.195 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.UserDao.selectList - ==> Parameters: 4444(String)
2023-03-10 09:35:40.195 [http-nio-9999-exec-7] DEBUG com.chat.message.dao.UserDao.selectList - ==> Parameters: 1111(String)
2023-03-10 09:35:40.195 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.UserDao.selectList - <==      Total: 1
2023-03-10 09:35:40.195 [http-nio-9999-exec-7] DEBUG com.chat.message.dao.UserDao.selectList - <==      Total: 1
2023-03-10 09:35:40.315 [http-nio-9999-exec-6] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:4
2023-03-10 09:35:40.315 [http-nio-9999-exec-10] DEBUG com.chat.message.dao.MessageDao.selectPage - ==>  Preparing: SELECT COUNT(1) FROM message WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) 
2023-03-10 09:35:40.325 [http-nio-9999-exec-10] DEBUG com.chat.message.dao.MessageDao.selectPage - ==> Parameters: 0(Integer), 0(Long), 4(Long), 0(Long), 4(Long)
2023-03-10 09:35:40.325 [http-nio-9999-exec-10] DEBUG com.chat.message.dao.MessageDao.selectPage - ==>  Preparing: SELECT id,type,content,content_type,is_read,sender,receiver,request_id,is_last,created_by,created_time,updated_by,updated_time,del_flag,status,remarks FROM message WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) ORDER BY created_time DESC LIMIT ?,? 
2023-03-10 09:35:40.325 [http-nio-9999-exec-10] DEBUG com.chat.message.dao.MessageDao.selectPage - ==> Parameters: 0(Integer), 0(Long), 4(Long), 0(Long), 4(Long), 0(Long), 2(Long)
2023-03-10 09:35:40.325 [http-nio-9999-exec-10] DEBUG com.chat.message.dao.MessageDao.selectPage - <==      Total: 2
2023-03-10 09:35:40.325 [http-nio-9999-exec-10] DEBUG com.chat.message.dao.MessageDao.update - ==>  Preparing: UPDATE message SET is_read=? WHERE (del_flag = ? AND sender = ? AND receiver = ?) 
2023-03-10 09:35:40.325 [http-nio-9999-exec-10] DEBUG com.chat.message.dao.MessageDao.update - ==> Parameters: 1(Integer), 0(Integer), 4(Long), 0(Long)
2023-03-10 09:35:40.325 [http-nio-9999-exec-10] DEBUG com.chat.message.dao.MessageDao.update - <==    Updates: 3
2023-03-10 09:35:44.085 [http-nio-9999-exec-9] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:4
2023-03-10 09:35:45.935 [http-nio-9999-exec-4] INFO  com.chat.message.web.WebSocketOneToOneController - 此二人聊天，距离上一次聊天时间相差分钟数：2
2023-03-10 09:35:45.935 [http-nio-9999-exec-4] DEBUG com.chat.message.dao.MessageDao.update - ==>  Preparing: UPDATE message SET is_last=? WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) 
2023-03-10 09:35:45.935 [http-nio-9999-exec-4] DEBUG com.chat.message.dao.MessageDao.update - ==> Parameters: 0(Integer), 0(Integer), 0(Long), 4(Long), 0(Long), 4(Long)
2023-03-10 09:35:45.935 [http-nio-9999-exec-4] DEBUG com.chat.message.dao.MessageDao.update - <==    Updates: 16
2023-03-10 09:35:45.945 [http-nio-9999-exec-4] DEBUG com.chat.message.dao.MessageDao.insert - ==>  Preparing: INSERT INTO message ( type, content, content_type, is_read, sender, receiver, request_id, is_last, created_by, created_time, updated_by, updated_time, del_flag ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2023-03-10 09:35:45.945 [http-nio-9999-exec-4] DEBUG com.chat.message.dao.MessageDao.insert - ==> Parameters: 0(Integer), https://ldzy-zhang.oss-cn-shenzhen.aliyuncs.com/message/20230310/652384ebf2e44001ba44db246c9e2add.jpg(String), 1(Integer), 0(String), 0(Long), 4(Long), bfd149c3-3194-414b-95a2-89831a766b7a(String), true(Boolean), null, 2023-03-10 09:35:45.935(Timestamp), null, null, 0(String)
2023-03-10 09:35:45.945 [http-nio-9999-exec-4] DEBUG com.chat.message.dao.MessageDao.insert - <==    Updates: 1
2023-03-10 09:35:48.845 [http-nio-9999-exec-2] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:4
2023-03-10 09:35:57.715 [http-nio-9999-exec-7] DEBUG com.chat.message.dao.UserDao.selectList - ==>  Preparing: SELECT id,name,avatar,open_id FROM user WHERE (open_id = ?) 
2023-03-10 09:35:57.715 [http-nio-9999-exec-6] DEBUG com.chat.message.dao.UserDao.selectList - ==>  Preparing: SELECT id,name,avatar,open_id FROM user WHERE (open_id = ?) 
2023-03-10 09:35:57.715 [http-nio-9999-exec-7] DEBUG com.chat.message.dao.UserDao.selectList - ==> Parameters: 2222(String)
2023-03-10 09:35:57.715 [http-nio-9999-exec-6] DEBUG com.chat.message.dao.UserDao.selectList - ==> Parameters: 1111(String)
2023-03-10 09:35:57.715 [http-nio-9999-exec-7] DEBUG com.chat.message.dao.UserDao.selectList - <==      Total: 1
2023-03-10 09:35:57.715 [http-nio-9999-exec-6] DEBUG com.chat.message.dao.UserDao.selectList - <==      Total: 1
2023-03-10 09:35:57.825 [http-nio-9999-exec-10] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:2
2023-03-10 09:35:57.835 [http-nio-9999-exec-8] DEBUG com.chat.message.dao.MessageDao.selectPage - ==>  Preparing: SELECT COUNT(1) FROM message WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) 
2023-03-10 09:35:57.835 [http-nio-9999-exec-8] DEBUG com.chat.message.dao.MessageDao.selectPage - ==> Parameters: 0(Integer), 0(Long), 2(Long), 0(Long), 2(Long)
2023-03-10 09:35:57.835 [http-nio-9999-exec-8] DEBUG com.chat.message.dao.MessageDao.selectPage - ==>  Preparing: SELECT id,type,content,content_type,is_read,sender,receiver,request_id,is_last,created_by,created_time,updated_by,updated_time,del_flag,status,remarks FROM message WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) ORDER BY created_time DESC LIMIT ?,? 
2023-03-10 09:35:57.835 [http-nio-9999-exec-8] DEBUG com.chat.message.dao.MessageDao.selectPage - ==> Parameters: 0(Integer), 0(Long), 2(Long), 0(Long), 2(Long), 0(Long), 2(Long)
2023-03-10 09:35:57.835 [http-nio-9999-exec-8] DEBUG com.chat.message.dao.MessageDao.selectPage - <==      Total: 2
2023-03-10 09:35:57.845 [http-nio-9999-exec-8] DEBUG com.chat.message.dao.MessageDao.update - ==>  Preparing: UPDATE message SET is_read=? WHERE (del_flag = ? AND sender = ? AND receiver = ?) 
2023-03-10 09:35:57.845 [http-nio-9999-exec-8] DEBUG com.chat.message.dao.MessageDao.update - ==> Parameters: 1(Integer), 0(Integer), 2(Long), 0(Long)
2023-03-10 09:35:57.845 [http-nio-9999-exec-8] DEBUG com.chat.message.dao.MessageDao.update - <==    Updates: 0
2023-03-10 09:36:01.791 [http-nio-9999-exec-1] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:4
2023-03-10 09:36:04.185 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.UserDao.selectList - ==>  Preparing: SELECT id,name,avatar,open_id FROM user WHERE (open_id = ?) 
2023-03-10 09:36:04.185 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.UserDao.selectList - ==> Parameters: 4444(String)
2023-03-10 09:36:04.185 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.UserDao.selectList - ==>  Preparing: SELECT id,name,avatar,open_id FROM user WHERE (open_id = ?) 
2023-03-10 09:36:04.185 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.UserDao.selectList - ==> Parameters: 1111(String)
2023-03-10 09:36:04.185 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.UserDao.selectList - <==      Total: 1
2023-03-10 09:36:04.185 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.UserDao.selectList - <==      Total: 1
2023-03-10 09:36:04.275 [http-nio-9999-exec-3] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:4
2023-03-10 09:36:04.285 [http-nio-9999-exec-6] DEBUG com.chat.message.dao.MessageDao.selectPage - ==>  Preparing: SELECT COUNT(1) FROM message WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) 
2023-03-10 09:36:04.295 [http-nio-9999-exec-6] DEBUG com.chat.message.dao.MessageDao.selectPage - ==> Parameters: 0(Integer), 0(Long), 4(Long), 0(Long), 4(Long)
2023-03-10 09:36:04.295 [http-nio-9999-exec-6] DEBUG com.chat.message.dao.MessageDao.selectPage - ==>  Preparing: SELECT id,type,content,content_type,is_read,sender,receiver,request_id,is_last,created_by,created_time,updated_by,updated_time,del_flag,status,remarks FROM message WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) ORDER BY created_time DESC LIMIT ?,? 
2023-03-10 09:36:04.295 [http-nio-9999-exec-6] DEBUG com.chat.message.dao.MessageDao.selectPage - ==> Parameters: 0(Integer), 0(Long), 4(Long), 0(Long), 4(Long), 0(Long), 2(Long)
2023-03-10 09:36:04.295 [http-nio-9999-exec-6] DEBUG com.chat.message.dao.MessageDao.selectPage - <==      Total: 2
2023-03-10 09:36:04.295 [http-nio-9999-exec-6] DEBUG com.chat.message.dao.MessageDao.update - ==>  Preparing: UPDATE message SET is_read=? WHERE (del_flag = ? AND sender = ? AND receiver = ?) 
2023-03-10 09:36:04.295 [http-nio-9999-exec-6] DEBUG com.chat.message.dao.MessageDao.update - ==> Parameters: 1(Integer), 0(Integer), 4(Long), 0(Long)
2023-03-10 09:36:04.295 [http-nio-9999-exec-6] DEBUG com.chat.message.dao.MessageDao.update - <==    Updates: 3
2023-03-10 09:36:04.965 [http-nio-9999-exec-7] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:2
2023-03-10 09:36:08.274 [http-nio-9999-exec-9] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:4
2023-03-10 09:36:10.455 [http-nio-9999-exec-1] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:2
2023-03-10 09:36:30.174 [http-nio-9999-exec-3] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:2
2023-03-10 09:36:31.125 [http-nio-9999-exec-6] INFO  com.chat.message.web.WebSocketOneToOneController - 此二人聊天，距离上一次聊天时间相差分钟数：1
2023-03-10 09:36:31.125 [http-nio-9999-exec-6] DEBUG com.chat.message.dao.MessageDao.update - ==>  Preparing: UPDATE message SET is_last=? WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) 
2023-03-10 09:36:31.125 [http-nio-9999-exec-6] DEBUG com.chat.message.dao.MessageDao.update - ==> Parameters: 0(Integer), 0(Integer), 0(Long), 4(Long), 0(Long), 4(Long)
2023-03-10 09:36:31.125 [http-nio-9999-exec-6] DEBUG com.chat.message.dao.MessageDao.update - <==    Updates: 17
2023-03-10 09:36:31.125 [http-nio-9999-exec-6] DEBUG com.chat.message.dao.MessageDao.insert - ==>  Preparing: INSERT INTO message ( type, content, content_type, is_read, sender, receiver, request_id, is_last, created_by, created_time, updated_by, updated_time, del_flag ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2023-03-10 09:36:31.125 [http-nio-9999-exec-6] DEBUG com.chat.message.dao.MessageDao.insert - ==> Parameters: 0(Integer), https://ldzy-zhang.oss-cn-shenzhen.aliyuncs.com/message/20230310/35eb95ef9ff34e3c9564dba649ef3c46.jpg(String), 1(Integer), 0(String), 0(Long), 4(Long), 07d2cb18-5d74-4418-8b7c-5979832e3b44(String), true(Boolean), null, 2023-03-10 09:36:31.125(Timestamp), null, null, 0(String)
2023-03-10 09:36:31.125 [http-nio-9999-exec-6] DEBUG com.chat.message.dao.MessageDao.insert - <==    Updates: 1
2023-03-10 09:36:40.395 [http-nio-9999-exec-10] DEBUG com.chat.message.dao.UserDao.selectList - ==>  Preparing: SELECT id,name,avatar,open_id FROM user WHERE (open_id = ?) 
2023-03-10 09:36:40.395 [http-nio-9999-exec-8] DEBUG com.chat.message.dao.UserDao.selectList - ==>  Preparing: SELECT id,name,avatar,open_id FROM user WHERE (open_id = ?) 
2023-03-10 09:36:40.395 [http-nio-9999-exec-10] DEBUG com.chat.message.dao.UserDao.selectList - ==> Parameters: 4444(String)
2023-03-10 09:36:40.395 [http-nio-9999-exec-8] DEBUG com.chat.message.dao.UserDao.selectList - ==> Parameters: 1111(String)
2023-03-10 09:36:40.395 [http-nio-9999-exec-8] DEBUG com.chat.message.dao.UserDao.selectList - <==      Total: 1
2023-03-10 09:36:40.395 [http-nio-9999-exec-10] DEBUG com.chat.message.dao.UserDao.selectList - <==      Total: 1
2023-03-10 09:36:40.495 [http-nio-9999-exec-9] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:4
2023-03-10 09:36:40.505 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.selectPage - ==>  Preparing: SELECT COUNT(1) FROM message WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) 
2023-03-10 09:36:40.505 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.selectPage - ==> Parameters: 0(Integer), 0(Long), 4(Long), 0(Long), 4(Long)
2023-03-10 09:36:40.505 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.selectPage - ==>  Preparing: SELECT id,type,content,content_type,is_read,sender,receiver,request_id,is_last,created_by,created_time,updated_by,updated_time,del_flag,status,remarks FROM message WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) ORDER BY created_time DESC LIMIT ?,? 
2023-03-10 09:36:40.505 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.selectPage - ==> Parameters: 0(Integer), 0(Long), 4(Long), 0(Long), 4(Long), 0(Long), 2(Long)
2023-03-10 09:36:40.515 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.selectPage - <==      Total: 2
2023-03-10 09:36:40.515 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.update - ==>  Preparing: UPDATE message SET is_read=? WHERE (del_flag = ? AND sender = ? AND receiver = ?) 
2023-03-10 09:36:40.515 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.update - ==> Parameters: 1(Integer), 0(Integer), 4(Long), 0(Long)
2023-03-10 09:36:40.515 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.update - <==    Updates: 3
2023-03-10 09:36:40.895 [http-nio-9999-exec-4] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:2
2023-03-10 09:36:47.433 [http-nio-9999-exec-5] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:2
2023-03-10 09:42:18.747 [http-nio-9999-exec-9] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:2
2023-03-10 09:50:38.887 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.UserDao.selectList - ==>  Preparing: SELECT id,name,avatar,open_id FROM user WHERE (open_id = ?) 
2023-03-10 09:50:38.888 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.UserDao.selectList - ==> Parameters: 3333(String)
2023-03-10 09:50:38.889 [http-nio-9999-exec-4] DEBUG com.chat.message.dao.UserDao.selectList - ==>  Preparing: SELECT id,name,avatar,open_id FROM user WHERE (open_id = ?) 
2023-03-10 09:50:38.889 [http-nio-9999-exec-4] DEBUG com.chat.message.dao.UserDao.selectList - ==> Parameters: 1111(String)
2023-03-10 09:50:38.889 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.UserDao.selectList - <==      Total: 1
2023-03-10 09:50:38.890 [http-nio-9999-exec-4] DEBUG com.chat.message.dao.UserDao.selectList - <==      Total: 1
2023-03-10 09:50:39.079 [http-nio-9999-exec-3] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:3
2023-03-10 09:50:39.085 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.MessageDao.selectPage - ==>  Preparing: SELECT COUNT(1) FROM message WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) 
2023-03-10 09:50:39.085 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.MessageDao.selectPage - ==> Parameters: 0(Integer), 0(Long), 3(Long), 0(Long), 3(Long)
2023-03-10 09:50:39.087 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.MessageDao.selectPage - ==>  Preparing: SELECT id,type,content,content_type,is_read,sender,receiver,request_id,is_last,created_by,created_time,updated_by,updated_time,del_flag,status,remarks FROM message WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) ORDER BY created_time DESC LIMIT ?,? 
2023-03-10 09:50:39.087 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.MessageDao.selectPage - ==> Parameters: 0(Integer), 0(Long), 3(Long), 0(Long), 3(Long), 0(Long), 2(Long)
2023-03-10 09:50:39.088 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.MessageDao.selectPage - <==      Total: 2
2023-03-10 09:50:39.089 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.MessageDao.update - ==>  Preparing: UPDATE message SET is_read=? WHERE (del_flag = ? AND sender = ? AND receiver = ?) 
2023-03-10 09:50:39.089 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.MessageDao.update - ==> Parameters: 1(Integer), 0(Integer), 3(Long), 0(Long)
2023-03-10 09:50:39.090 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.MessageDao.update - <==    Updates: 0
2023-03-10 09:50:45.927 [http-nio-9999-exec-5] INFO  com.chat.message.web.WebSocketOneToOneController - 此二人聊天，距离上一次聊天时间相差分钟数：18
2023-03-10 09:50:45.929 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.update - ==>  Preparing: UPDATE message SET is_last=? WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) 
2023-03-10 09:50:45.930 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.update - ==> Parameters: 0(Integer), 0(Integer), 0(Long), 3(Long), 0(Long), 3(Long)
2023-03-10 09:50:45.931 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.update - <==    Updates: 3
2023-03-10 09:50:45.932 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.insert - ==>  Preparing: INSERT INTO message ( type, content, content_type, is_read, sender, receiver, request_id, is_last, created_by, created_time, updated_by, updated_time, del_flag ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2023-03-10 09:50:45.933 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.insert - ==> Parameters: 1(Integer), [{"type":2,"content":"[抠鼻]","imageClass":"smiley_41"}](String), 0(Integer), 0(String), 0(Long), 3(Long), c59c6998-19ee-4e70-85c8-871361279216(String), true(Boolean), null, 2023-03-10 09:50:45.927(Timestamp), null, null, 0(String)
2023-03-10 09:50:45.934 [http-nio-9999-exec-5] DEBUG com.chat.message.dao.MessageDao.insert - <==    Updates: 1
2023-03-10 09:50:56.911 [http-nio-9999-exec-6] DEBUG com.chat.message.dao.MessageDao.update - ==>  Preparing: UPDATE message SET is_last=? WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) 
2023-03-10 09:50:56.912 [http-nio-9999-exec-6] DEBUG com.chat.message.dao.MessageDao.update - ==> Parameters: 0(Integer), 0(Integer), 0(Long), 3(Long), 0(Long), 3(Long)
2023-03-10 09:50:56.913 [http-nio-9999-exec-6] DEBUG com.chat.message.dao.MessageDao.update - <==    Updates: 4
2023-03-10 09:50:56.914 [http-nio-9999-exec-6] DEBUG com.chat.message.dao.MessageDao.insert - ==>  Preparing: INSERT INTO message ( type, content, content_type, is_read, sender, receiver, request_id, is_last, created_by, created_time, updated_by, updated_time, del_flag ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2023-03-10 09:50:56.914 [http-nio-9999-exec-6] DEBUG com.chat.message.dao.MessageDao.insert - ==> Parameters: 0(Integer), [{"type":2,"content":"[抠鼻]","imageClass":"smiley_41"}](String), 0(Integer), 0(String), 0(Long), 3(Long), eff9a21b-2141-4388-bbd4-5286e392403b(String), true(Boolean), null, 2023-03-10 09:50:56.909(Timestamp), null, null, 0(String)
2023-03-10 09:50:56.916 [http-nio-9999-exec-6] DEBUG com.chat.message.dao.MessageDao.insert - <==    Updates: 1
2023-03-10 09:51:18.555 [http-nio-9999-exec-10] DEBUG com.chat.message.dao.UserDao.selectList - ==>  Preparing: SELECT id,name,avatar,open_id FROM user WHERE (open_id <> ?) 
2023-03-10 09:51:18.555 [http-nio-9999-exec-10] DEBUG com.chat.message.dao.UserDao.selectList - ==> Parameters: 1111(String)
2023-03-10 09:51:18.557 [http-nio-9999-exec-10] DEBUG com.chat.message.dao.UserDao.selectList - <==      Total: 5
2023-03-10 09:51:19.921 [http-nio-9999-exec-9] DEBUG com.chat.message.dao.UserDao.selectList - ==>  Preparing: SELECT id,name,avatar,open_id FROM user WHERE (open_id = ?) 
2023-03-10 09:51:19.922 [http-nio-9999-exec-9] DEBUG com.chat.message.dao.UserDao.selectList - ==> Parameters: 4444(String)
2023-03-10 09:51:19.924 [http-nio-9999-exec-9] DEBUG com.chat.message.dao.UserDao.selectList - <==      Total: 1
2023-03-10 09:51:19.925 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.UserDao.selectList - ==>  Preparing: SELECT id,name,avatar,open_id FROM user WHERE (open_id = ?) 
2023-03-10 09:51:19.925 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.UserDao.selectList - ==> Parameters: 1111(String)
2023-03-10 09:51:19.927 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.UserDao.selectList - <==      Total: 1
2023-03-10 09:51:20.053 [http-nio-9999-exec-4] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:4
2023-03-10 09:51:20.060 [http-nio-9999-exec-3] DEBUG com.chat.message.dao.MessageDao.selectPage - ==>  Preparing: SELECT COUNT(1) FROM message WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) 
2023-03-10 09:51:20.060 [http-nio-9999-exec-3] DEBUG com.chat.message.dao.MessageDao.selectPage - ==> Parameters: 0(Integer), 0(Long), 4(Long), 0(Long), 4(Long)
2023-03-10 09:51:20.063 [http-nio-9999-exec-3] DEBUG com.chat.message.dao.MessageDao.selectPage - ==>  Preparing: SELECT id,type,content,content_type,is_read,sender,receiver,request_id,is_last,created_by,created_time,updated_by,updated_time,del_flag,status,remarks FROM message WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) ORDER BY created_time DESC LIMIT ?,? 
2023-03-10 09:51:20.063 [http-nio-9999-exec-3] DEBUG com.chat.message.dao.MessageDao.selectPage - ==> Parameters: 0(Integer), 0(Long), 4(Long), 0(Long), 4(Long), 0(Long), 2(Long)
2023-03-10 09:51:20.065 [http-nio-9999-exec-3] DEBUG com.chat.message.dao.MessageDao.selectPage - <==      Total: 2
2023-03-10 09:51:20.066 [http-nio-9999-exec-3] DEBUG com.chat.message.dao.MessageDao.update - ==>  Preparing: UPDATE message SET is_read=? WHERE (del_flag = ? AND sender = ? AND receiver = ?) 
2023-03-10 09:51:20.066 [http-nio-9999-exec-3] DEBUG com.chat.message.dao.MessageDao.update - ==> Parameters: 1(Integer), 0(Integer), 4(Long), 0(Long)
2023-03-10 09:51:20.069 [http-nio-9999-exec-3] DEBUG com.chat.message.dao.MessageDao.update - <==    Updates: 3
2023-03-10 09:51:26.529 [http-nio-9999-exec-2] INFO  com.chat.message.web.WebSocketOneToOneController - 此二人聊天，距离上一次聊天时间相差分钟数：15
2023-03-10 09:51:26.535 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.MessageDao.update - ==>  Preparing: UPDATE message SET is_last=? WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) 
2023-03-10 09:51:26.536 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.MessageDao.update - ==> Parameters: 0(Integer), 0(Integer), 0(Long), 4(Long), 0(Long), 4(Long)
2023-03-10 09:51:26.537 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.MessageDao.update - <==    Updates: 18
2023-03-10 09:51:26.538 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.MessageDao.insert - ==>  Preparing: INSERT INTO message ( type, content, content_type, is_read, sender, receiver, request_id, is_last, created_by, created_time, updated_by, updated_time, del_flag ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2023-03-10 09:51:26.538 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.MessageDao.insert - ==> Parameters: 1(Integer), [{"type":2,"content":"[再见]","imageClass":"smiley_39"}](String), 0(Integer), 0(String), 0(Long), 4(Long), 8e5fbf80-2579-4399-8daf-1cc67fd30ae0(String), true(Boolean), null, 2023-03-10 09:51:26.529(Timestamp), null, null, 0(String)
2023-03-10 09:51:26.539 [http-nio-9999-exec-2] DEBUG com.chat.message.dao.MessageDao.insert - <==    Updates: 1
2023-03-10 09:56:13.535 [http-nio-9999-exec-7] DEBUG com.chat.message.dao.UserDao.selectList - ==>  Preparing: SELECT id,name,avatar,open_id FROM user WHERE (open_id = ?) 
2023-03-10 09:56:13.536 [http-nio-9999-exec-7] DEBUG com.chat.message.dao.UserDao.selectList - ==> Parameters: 4444(String)
2023-03-10 09:56:13.537 [http-nio-9999-exec-7] DEBUG com.chat.message.dao.UserDao.selectList - <==      Total: 1
2023-03-10 09:56:13.539 [http-nio-9999-exec-10] DEBUG com.chat.message.dao.UserDao.selectList - ==>  Preparing: SELECT id,name,avatar,open_id FROM user WHERE (open_id = ?) 
2023-03-10 09:56:13.539 [http-nio-9999-exec-10] DEBUG com.chat.message.dao.UserDao.selectList - ==> Parameters: 1111(String)
2023-03-10 09:56:13.542 [http-nio-9999-exec-10] DEBUG com.chat.message.dao.UserDao.selectList - <==      Total: 1
2023-03-10 09:56:13.953 [http-nio-9999-exec-9] INFO  com.chat.message.web.WebSocketOneToOneController - sendId:0roomId:4
2023-03-10 09:56:13.962 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.selectPage - ==>  Preparing: SELECT COUNT(1) FROM message WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) 
2023-03-10 09:56:13.962 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.selectPage - ==> Parameters: 0(Integer), 0(Long), 4(Long), 0(Long), 4(Long)
2023-03-10 09:56:13.964 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.selectPage - ==>  Preparing: SELECT id,type,content,content_type,is_read,sender,receiver,request_id,is_last,created_by,created_time,updated_by,updated_time,del_flag,status,remarks FROM message WHERE (del_flag = ? AND ((sender = ? AND receiver = ?) OR (receiver = ? AND sender = ?))) ORDER BY created_time DESC LIMIT ?,? 
2023-03-10 09:56:13.964 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.selectPage - ==> Parameters: 0(Integer), 0(Long), 4(Long), 0(Long), 4(Long), 0(Long), 2(Long)
2023-03-10 09:56:13.966 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.selectPage - <==      Total: 2
2023-03-10 09:56:13.967 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.update - ==>  Preparing: UPDATE message SET is_read=? WHERE (del_flag = ? AND sender = ? AND receiver = ?) 
2023-03-10 09:56:13.967 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.update - ==> Parameters: 1(Integer), 0(Integer), 4(Long), 0(Long)
2023-03-10 09:56:13.970 [http-nio-9999-exec-1] DEBUG com.chat.message.dao.MessageDao.update - <==    Updates: 3
